
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  
    <title>java图像处理干货篇一 | 觅</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Chenjiabing">
    

    
    <meta name="description" content="java图像处理干货篇绘制图像
绘制图像主要用到的是Graphics类中drawImage方法，当然Graphics2D中也有相应的方法

主要的用法：

public abstract boolean drawImage(Image img,x,y,ImageObserver observer):img是Image对象，x,y起始坐标,observer是观察对象
drawImage(Image">
<meta property="og:type" content="article">
<meta property="og:title" content="java图像处理干货篇一">
<meta property="og:url" content="http://chenjiabing666.github.io/2017/04/04/java图像处理干货篇/index.html">
<meta property="og:site_name" content="觅">
<meta property="og:description" content="java图像处理干货篇绘制图像
绘制图像主要用到的是Graphics类中drawImage方法，当然Graphics2D中也有相应的方法

主要的用法：

public abstract boolean drawImage(Image img,x,y,ImageObserver observer):img是Image对象，x,y起始坐标,observer是观察对象
drawImage(Image">
<meta property="og:updated_time" content="2017-04-09T07:04:17.914Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java图像处理干货篇一">
<meta name="twitter:description" content="java图像处理干货篇绘制图像
绘制图像主要用到的是Graphics类中drawImage方法，当然Graphics2D中也有相应的方法

主要的用法：

public abstract boolean drawImage(Image img,x,y,ImageObserver observer):img是Image对象，x,y起始坐标,observer是观察对象
drawImage(Image">

    
    <link rel="alternative" href="/atom.xml" title="觅" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/avatar.jpg" alt="觅" title="觅"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="觅">觅</a></h1>
				<h2 class="blog-motto">爱生活爱编码</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives/">归档</a></li>
					
						<li><a href="/about/">关于我</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/04/java图像处理干货篇/" title="java图像处理干货篇一" itemprop="url">java图像处理干货篇一</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Chenjiabing" target="_blank" itemprop="author">Chenjiabing</a>
		
  <p class="article-time">
    <time datetime="2017-04-04T12:17:07.000Z" itemprop="datePublished"> 发表于 2017-04-04</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#java图像处理干货篇"><span class="toc-number">1.</span> <span class="toc-text">java图像处理干货篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制图像"><span class="toc-number">1.1.</span> <span class="toc-text">绘制图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#翻转图像"><span class="toc-number">1.2.</span> <span class="toc-text">翻转图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#旋转图像"><span class="toc-number">1.3.</span> <span class="toc-text">旋转图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#倾斜图像"><span class="toc-number">1.4.</span> <span class="toc-text">倾斜图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#裁剪图片"><span class="toc-number">1.5.</span> <span class="toc-text">裁剪图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调整图片的亮度"><span class="toc-number">1.6.</span> <span class="toc-text">调整图片的亮度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#转换彩色图片为灰色图片"><span class="toc-number">1.7.</span> <span class="toc-text">转换彩色图片为灰色图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结："><span class="toc-number">1.8.</span> <span class="toc-text">总结：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作者说"><span class="toc-number">1.9.</span> <span class="toc-text">作者说</span></a></li></ol></li></ol>
		
		</div>
		
		<h1 id="java图像处理干货篇"><a href="#java图像处理干货篇" class="headerlink" title="java图像处理干货篇"></a>java图像处理干货篇</h1><h2 id="绘制图像"><a href="#绘制图像" class="headerlink" title="绘制图像"></a>绘制图像</h2><blockquote>
<p>绘制图像主要用到的是Graphics类中drawImage方法，当然Graphics2D中也有相应的方法</p>
<blockquote>
<p>主要的用法：</p>
<ul>
<li><code>public abstract boolean drawImage(Image img,x,y,ImageObserver observer)</code>:img是<code>Image</code>对象，x,y起始坐标,<code>observer</code>是观察对象</li>
<li><code>drawImage(Image img,int x,int y,int width,int height,Imageobersver observer)</code>:<code>width</code>和<code>height</code>是指定图像的宽度和高度，主要的作用是放大和缩小图像</li>
<li><code>drawImage(Image img,int dx1,int dy1,int dx2,int dx2,int sx1,int sy1,int sx2,int sy2,ImageObserver observer)</code>:主要用来翻转图形,通过互换源矩形的第一个和第二个角的x坐标可以实现水平翻转，通过互换源矩形的第一个和第二个角的y坐标可以实现垂直翻转</li>
</ul>
</blockquote>
</blockquote>
<h2 id="翻转图像"><a href="#翻转图像" class="headerlink" title="翻转图像"></a>翻转图像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zzk;</div><div class="line"><span class="keyword">import</span> java.awt.BorderLayout;</div><div class="line"><span class="keyword">import</span> java.awt.Graphics;</div><div class="line"><span class="keyword">import</span> java.awt.Image;</div><div class="line"><span class="keyword">import</span> java.awt.Toolkit;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> javax.swing.JButton;</div><div class="line"><span class="keyword">import</span> javax.swing.JFrame;</div><div class="line"><span class="keyword">import</span> javax.swing.JPanel;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PartImageFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Image img = <span class="keyword">null</span>;  <span class="comment">// 声明图像对象</span></div><div class="line">    <span class="keyword">private</span> PartImagePanel imagePanel = <span class="keyword">null</span>;  <span class="comment">// 声明图像面板对象</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> dx1, dy1, dx2, dy2;   <span class="comment">// 目标矩形第一个角与第二个角的X、Y坐标</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sx1, sy1, sx2, sy2;   <span class="comment">// 源矩形第一个角与第二个角的X、Y坐标</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        PartImageFrame frame = <span class="keyword">new</span> PartImageFrame();</div><div class="line">        frame.setVisible(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PartImageFrame</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        URL imgUrl = PartImageFrame.class.getResource(<span class="string">"/img/image.jpg"</span>);<span class="comment">// 获取图片资源的路径</span></div><div class="line">        img = Toolkit.getDefaultToolkit().getImage(imgUrl); <span class="comment">// 获取图像资源</span></div><div class="line">        dx2 = sx2 = <span class="number">340</span>; <span class="comment">// 初始化图像大小</span></div><div class="line">        dy2 = sy2 = <span class="number">200</span>; <span class="comment">// 初始化图像大小</span></div><div class="line">        imagePanel = <span class="keyword">new</span> PartImagePanel();  <span class="comment">// 创建图像面板对象</span></div><div class="line">        <span class="keyword">this</span>.setBounds(<span class="number">200</span>, <span class="number">160</span>, <span class="number">355</span>, <span class="number">276</span>); <span class="comment">// 设置窗体大小和位置</span></div><div class="line">        <span class="keyword">this</span>.add(imagePanel); <span class="comment">// 在窗体中部位置添加图像面板对象</span></div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); <span class="comment">// 设置窗体关闭模式</span></div><div class="line">        <span class="keyword">this</span>.setTitle(<span class="string">"翻转图像"</span>); <span class="comment">// 设置窗体标题</span></div><div class="line">        <span class="keyword">final</span> JPanel panel = <span class="keyword">new</span> JPanel();</div><div class="line">        getContentPane().add(panel, BorderLayout.SOUTH);</div><div class="line">        <span class="keyword">final</span> JButton btn_h = <span class="keyword">new</span> JButton();</div><div class="line">        btn_h.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                <span class="comment">// 下面3行代码用于交换sx1和sx2的值</span></div><div class="line">                <span class="keyword">int</span> x = sx1;</div><div class="line">                sx1 = sx2;</div><div class="line">                sx2 = x;</div><div class="line">                imagePanel.repaint();  <span class="comment">// 重新调用面板类的paint()方法</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        btn_h.setText(<span class="string">"水平翻转"</span>);</div><div class="line">        panel.add(btn_h);</div><div class="line">        <span class="keyword">final</span> JButton btn_v = <span class="keyword">new</span> JButton();</div><div class="line">        btn_v.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                <span class="comment">// 下面3行代码用于交换sy1和sy2的值</span></div><div class="line">                <span class="keyword">int</span> y = sy1;</div><div class="line">                sy1 = sy2;</div><div class="line">                sy2 = y;</div><div class="line">                imagePanel.repaint();<span class="comment">// 重新调用面板类的paint()方法</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        btn_v.setText(<span class="string">"垂直翻转"</span>);</div><div class="line">        panel.add(btn_v);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 创建面板类</span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">PartImagePanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">            g.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.getWidth(), <span class="keyword">this</span>.getHeight());<span class="comment">// 清除绘图上下文的内容</span></div><div class="line">            g.drawImage(img, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, <span class="keyword">this</span>);<span class="comment">// 绘制图像</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="旋转图像"><a href="#旋转图像" class="headerlink" title="旋转图像"></a>旋转图像</h2><blockquote>
<p>主要用到的是<code>Graphics2D</code>类中的<code>rotate</code>函数，定义如下:<code>public abstract void rotate(double theta)</code>: <code>theta</code>是角度，以弧度为单位<br><strong>代码如下</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package com.zzk;</div><div class="line">import java.awt.*;</div><div class="line">import java.net.URL;</div><div class="line">import javax.swing.*;</div><div class="line">public class RotateImageFrame extends JFrame &#123;</div><div class="line">    private Image img = null;</div><div class="line">    private RotatePanel rotatePanel = null;</div><div class="line">    public RotateImageFrame() &#123;</div><div class="line">        URL imgUrl = RotateImageFrame.class.getResource(&quot;/img/image.jpg&quot;);// 获取图片资源的路径</div><div class="line">        img = Toolkit.getDefaultToolkit().getImage(imgUrl);   // 获取图片资源</div><div class="line">        rotatePanel = new RotatePanel();  // 创建旋转图像的面板对象</div><div class="line">        this.setBounds(150, 120, 380, 310);                 // 设置窗体大小和位置</div><div class="line">        add(rotatePanel);// 在窗体上放置图像面板</div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  // 设置窗体关闭模式</div><div class="line">        this.setTitle(&quot;旋转图像&quot;);                     // 设置窗体标题</div><div class="line">    &#125;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        new RotateImageFrame().setVisible(true);</div><div class="line">    &#125;</div><div class="line">    class RotatePanel extends JPanel &#123;</div><div class="line">        public void paint(Graphics g) &#123;</div><div class="line">            Graphics2D g2 = (Graphics2D) g;         // 获得Graphics2D对象</div><div class="line">            g2.drawImage(img, 80, 10, 260, 150, this);      // 绘制指定大小的图片</div><div class="line">            g2.rotate(Math.toRadians(10));                 // 将图片旋转10度</div><div class="line">            g2.drawImage(img, 80, 10, 260, 150, this);      // 绘制指定大小的图片</div><div class="line">            g2.rotate(Math.toRadians(10));                // 将图片旋转10度</div><div class="line">            g2.drawImage(img, 80, 10, 260, 150, this);      // 绘制指定大小的图片</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="倾斜图像"><a href="#倾斜图像" class="headerlink" title="倾斜图像"></a>倾斜图像</h2><blockquote>
<p>主要用到的是<code>Graphics2D</code>中的<code>shear</code>函数定义如：<code>public abstract void shear(doubel shx,double shy)</code>:<code>shx</code>是在正x轴上移动坐标的乘数，它可以作为其纵坐标的值,shy是在正y轴方形移动坐标的乘数，它可以作为其x坐标的函数。<br><strong>本人的理解：<br>倾斜画布，如果shx&gt;0就是向正方向平移，平移的长度为shx*height(图形纵坐标的值，如果是矩形就是乘以矩形的高)<br>相同的对于shy是乘以矩形宽</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zzk;</div><div class="line"><span class="keyword">import</span> java.awt.*;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> javax.swing.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShearImageFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> Image img;</div><div class="line">	<span class="keyword">private</span> ShearImagePanel canvasPanel = <span class="keyword">null</span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ShearImageFrame</span><span class="params">()</span> </span>&#123;</div><div class="line">        URL imgUrl = ShearImageFrame.class.getResource(<span class="string">"/img/image.jpg"</span>);<span class="comment">// 获取图片资源的路径</span></div><div class="line">        img = Toolkit.getDefaultToolkit().getImage(imgUrl);  <span class="comment">// 获取图片资源</span></div><div class="line">        canvasPanel = <span class="keyword">new</span> ShearImagePanel();     <span class="comment">// 创建绘制倾斜图像的面板对象</span></div><div class="line">        <span class="keyword">this</span>.setBounds(<span class="number">100</span>, <span class="number">100</span>, <span class="number">360</span>, <span class="number">240</span>);                <span class="comment">// 设置窗体大小和位置</span></div><div class="line">        add(canvasPanel);<span class="comment">// 在窗体上添加面板对象</span></div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); <span class="comment">// 设置窗体关闭模式</span></div><div class="line">        <span class="keyword">this</span>.setTitle(<span class="string">"倾斜图像"</span>);                    <span class="comment">// 设置窗体标题</span></div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">new</span> ShearImageFrame().setVisible(<span class="keyword">true</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="class"><span class="keyword">class</span> <span class="title">ShearImagePanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;<span class="comment">// 绘制倾斜图像的面板类</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">			Graphics2D g2=(Graphics2D) g;<span class="comment">// 获得Graphics2D对象</span></div><div class="line">			g2.shear(<span class="number">0</span>, -<span class="number">0.5</span>);<span class="comment">// 倾斜图像</span></div><div class="line">			g2.drawImage(img, <span class="number">10</span>, <span class="number">20</span>, <span class="number">220</span>, <span class="number">160</span>, <span class="keyword">this</span>);     <span class="comment">// 绘制指定大小的图片</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="裁剪图片"><a href="#裁剪图片" class="headerlink" title="裁剪图片"></a>裁剪图片</h2><blockquote>
<p><code>public BufferedImage createScreenCapture(Rectangle screenRect)</code>:返回的是一个BufferedImage对象，参数是Rectangle对象，这个函数是Robot类中的，主要用于裁剪图形</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zzk;</div><div class="line"><span class="keyword">import</span> java.awt.AWTException;</div><div class="line"><span class="keyword">import</span> java.awt.BasicStroke;</div><div class="line"><span class="keyword">import</span> java.awt.BorderLayout;</div><div class="line"><span class="keyword">import</span> java.awt.Color;</div><div class="line"><span class="keyword">import</span> java.awt.Graphics;</div><div class="line"><span class="keyword">import</span> java.awt.Graphics2D;</div><div class="line"><span class="keyword">import</span> java.awt.Image;</div><div class="line"><span class="keyword">import</span> java.awt.Rectangle;</div><div class="line"><span class="keyword">import</span> java.awt.Robot;</div><div class="line"><span class="keyword">import</span> java.awt.Toolkit;</div><div class="line"><span class="keyword">import</span> java.awt.event.MouseAdapter;</div><div class="line"><span class="keyword">import</span> java.awt.event.MouseEvent;</div><div class="line"><span class="keyword">import</span> java.awt.event.MouseMotionAdapter;</div><div class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> javax.swing.JFrame;</div><div class="line"><span class="keyword">import</span> javax.swing.JPanel;</div><div class="line"><span class="keyword">import</span> javax.swing.JSplitPane;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CutImageFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Image img = <span class="keyword">null</span>; <span class="comment">// 声明图像对象</span></div><div class="line">    <span class="keyword">private</span> OldImagePanel oldImagePanel = <span class="keyword">null</span>; <span class="comment">// 声明图像面板对象</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pressPanelX = <span class="number">0</span>, pressPanelY = <span class="number">0</span>;<span class="comment">// 鼠标按下点的X、Y坐标 </span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pressX = <span class="number">0</span>, pressY = <span class="number">0</span>;<span class="comment">// 鼠标按下点在屏幕上的X、Y坐标</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> releaseX = <span class="number">0</span>, releaseY = <span class="number">0</span>;<span class="comment">// 鼠标释放点在屏幕上的X、Y坐标</span></div><div class="line">    <span class="keyword">private</span> Robot robot = <span class="keyword">null</span>;  <span class="comment">// 声明Robot对象</span></div><div class="line">    <span class="keyword">private</span> BufferedImage buffImage = <span class="keyword">null</span>; <span class="comment">// 声明缓冲图像对象</span></div><div class="line">    <span class="keyword">private</span> CutImagePanel cutImagePanel = <span class="keyword">new</span> CutImagePanel(); <span class="comment">// 创建绘制裁剪结果的面板</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;  <span class="comment">// 声明标记变量，为true时显示选择区域的矩形，否则不显示</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        CutImageFrame frame = <span class="keyword">new</span> CutImageFrame();</div><div class="line">        frame.setVisible(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CutImageFrame</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        URL imgUrl = CutImageFrame.class.getResource(<span class="string">"/img/image.jpg"</span>);<span class="comment">// 获取图片资源的路径</span></div><div class="line">        img = Toolkit.getDefaultToolkit().getImage(imgUrl); <span class="comment">// 获取图像资源</span></div><div class="line">        oldImagePanel = <span class="keyword">new</span> OldImagePanel(); <span class="comment">// 创建图像面板对象</span></div><div class="line">        <span class="keyword">this</span>.setBounds(<span class="number">200</span>, <span class="number">160</span>, <span class="number">355</span>, <span class="number">276</span>); <span class="comment">// 设置窗体大小和位置</span></div><div class="line">        <span class="keyword">final</span> JSplitPane splitPane = <span class="keyword">new</span> JSplitPane();</div><div class="line">        splitPane.setDividerLocation((<span class="keyword">this</span>.getWidth() / <span class="number">2</span>) - <span class="number">10</span>);</div><div class="line">        getContentPane().add(splitPane, BorderLayout.CENTER);</div><div class="line">        splitPane.setLeftComponent(oldImagePanel);</div><div class="line">        splitPane.setRightComponent(cutImagePanel);</div><div class="line">        oldImagePanel.addMouseListener(<span class="keyword">new</span> MouseAdapter() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mousePressed</span><span class="params">(<span class="keyword">final</span> MouseEvent e)</span> </span>&#123;  <span class="comment">// 鼠标键按下事件</span></div><div class="line">                pressPanelX = e.getX(); <span class="comment">// 获得鼠标按下点的X坐标 </span></div><div class="line">                pressPanelY = e.getY();<span class="comment">// 获得鼠标按下点的Y坐标 </span></div><div class="line">                pressX = e.getXOnScreen() + <span class="number">1</span>;<span class="comment">// 鼠标按下点在屏幕上的X坐标加1，即去除选择线</span></div><div class="line">                pressY = e.getYOnScreen() + <span class="number">1</span>;<span class="comment">// 鼠标按下点在屏幕上的Y坐标加1，即去除选择线</span></div><div class="line">                flag = <span class="keyword">true</span>;<span class="comment">// 为标记变量赋值为true</span></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseReleased</span><span class="params">(<span class="keyword">final</span> MouseEvent e)</span> </span>&#123; <span class="comment">// 鼠标键释放事件</span></div><div class="line">                releaseX = e.getXOnScreen() - <span class="number">1</span>;<span class="comment">// 鼠标释放点在屏幕上的X坐标减1，即去除选择线</span></div><div class="line">                    releaseY = e.getYOnScreen() - <span class="number">1</span>;<span class="comment">// 鼠标释放点在屏幕上的Y坐标减1，即去除选择线</span></div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                    robot = <span class="keyword">new</span> Robot();<span class="comment">// 创建Robot对象</span></div><div class="line">                    <span class="keyword">if</span> (releaseX - pressX &gt; <span class="number">0</span> &amp;&amp; releaseY - pressY &gt; <span class="number">0</span>) &#123;</div><div class="line">                        Rectangle rect = <span class="keyword">new</span> Rectangle(pressX, pressY, releaseX</div><div class="line">                                - pressX, releaseY - pressY);<span class="comment">// 创建Rectangle对象</span></div><div class="line">                        buffImage = robot.createScreenCapture(rect);<span class="comment">// 获得缓冲图像对象</span></div><div class="line">                        cutImagePanel.repaint(); <span class="comment">// 调用CutImagePanel面板的paint()方法</span></div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">catch</span> (AWTException e1) &#123;</div><div class="line">                    e1.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                flag = <span class="keyword">false</span>;<span class="comment">// 为标记变量赋值为false</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        oldImagePanel.addMouseMotionListener(<span class="keyword">new</span> MouseMotionAdapter() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseDragged</span><span class="params">(<span class="keyword">final</span> MouseEvent e)</span> </span>&#123;<span class="comment">// 鼠标拖动事件</span></div><div class="line">                <span class="keyword">if</span> (flag) &#123;</div><div class="line">                    releaseX = e.getXOnScreen();<span class="comment">// 获得鼠标释放点在屏幕上的X坐标</span></div><div class="line">                    releaseY = e.getYOnScreen();<span class="comment">// 获得鼠标释放点在屏幕上的Y坐标</span></div><div class="line">                    oldImagePanel.repaint();<span class="comment">// 调用OldImagePanel面板的paint()方法</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); <span class="comment">// 设置窗体关闭模式</span></div><div class="line">        <span class="keyword">this</span>.setTitle(<span class="string">"裁剪图片"</span>); <span class="comment">// 设置窗体标题</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">OldImagePanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;<span class="comment">// 创建绘制原图像的面板类</span></div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">            Graphics2D g2 = (Graphics2D) g;</div><div class="line">            g2.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.getWidth(), <span class="keyword">this</span>.getHeight(), <span class="keyword">this</span>);<span class="comment">// 绘制图像</span></div><div class="line">            g2.setColor(Color.WHITE);</div><div class="line">            <span class="keyword">if</span> (flag) &#123;</div><div class="line">                <span class="keyword">float</span>[] arr = &#123;<span class="number">5.0f</span>&#125;; <span class="comment">// 创建虚线模式的数组</span></div><div class="line">                BasicStroke stroke = <span class="keyword">new</span> BasicStroke(<span class="number">1</span>, BasicStroke.CAP_BUTT,</div><div class="line">                        BasicStroke.JOIN_BEVEL, <span class="number">1.0f</span>, arr, <span class="number">0</span>); <span class="comment">// 创建宽度是1的平头虚线笔画对象</span></div><div class="line">                g2.setStroke(stroke);<span class="comment">// 设置笔画对象</span></div><div class="line">                g2.drawRect(pressPanelX, pressPanelY, releaseX - pressX,</div><div class="line">                        releaseY - pressY);<span class="comment">// 绘制矩形选区</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CutImagePanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;<span class="comment">// 创建绘制裁剪结果的面板类</span></div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">            g.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.getWidth(), <span class="keyword">this</span>.getHeight());<span class="comment">// 清除绘图上下文的内容</span></div><div class="line">            g.drawImage(buffImage, <span class="number">0</span>, <span class="number">0</span>, releaseX - pressX, releaseY - pressY,</div><div class="line">                    <span class="keyword">this</span>);<span class="comment">// 绘制图像</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="调整图片的亮度"><a href="#调整图片的亮度" class="headerlink" title="调整图片的亮度"></a>调整图片的亮度</h2><blockquote>
<p><code>RescaleOp</code>类中的<code>filter</code>方法原缓冲图像进行重缩放，定义如下<br><code>public abstract BufferedImage filter(BufferedImage src,BufferedImage dst)</code>:src是要过滤的源对象，dst是目标对象，或则为null</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zzk;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.awt.BorderLayout;</div><div class="line"><span class="keyword">import</span> java.awt.Graphics;</div><div class="line"><span class="keyword">import</span> java.awt.Image;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</div><div class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</div><div class="line"><span class="keyword">import</span> java.awt.image.RescaleOp;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</div><div class="line"><span class="keyword">import</span> javax.swing.JButton;</div><div class="line"><span class="keyword">import</span> javax.swing.JFrame;</div><div class="line"><span class="keyword">import</span> javax.swing.JPanel;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageBrightenFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> BufferedImage image;<span class="comment">// 用于调整亮度的缓冲图像对象</span></div><div class="line">    <span class="keyword">private</span> BufferedImage oldImage;<span class="comment">// 用于存放调整亮度之前的原缓冲图像对象</span></div><div class="line">    <span class="keyword">private</span> ImageBrightenPanel imageBrightenPanel = <span class="keyword">new</span> ImageBrightenPanel();</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        ImageBrightenFrame frame = <span class="keyword">new</span> ImageBrightenFrame();</div><div class="line">        frame.setVisible(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ImageBrightenFrame</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        setBounds(<span class="number">100</span>, <span class="number">100</span>, <span class="number">357</span>, <span class="number">276</span>);</div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</div><div class="line">        setTitle(<span class="string">"调整图片的亮度"</span>);</div><div class="line">        Image img = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            img = ImageIO.read(<span class="keyword">new</span> File(<span class="string">"src/img/image.jpg"</span>));  <span class="comment">// 创建图像对象</span></div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        image = <span class="keyword">new</span> BufferedImage(img.getWidth(<span class="keyword">this</span>), img.getHeight(<span class="keyword">this</span>),</div><div class="line">        BufferedImage.TYPE_INT_RGB);<span class="comment">// 创建缓冲图像对象</span></div><div class="line">        image.getGraphics().drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);<span class="comment">// 在缓冲图像对象上绘制图像</span></div><div class="line">        oldImage = image;<span class="comment">// 存储原来的图像对象，用于以后的恢复操作</span></div><div class="line">        getContentPane().add(imageBrightenPanel, BorderLayout.CENTER);</div><div class="line">        </div><div class="line">        <span class="keyword">final</span> JPanel panel = <span class="keyword">new</span> JPanel();</div><div class="line">        getContentPane().add(panel, BorderLayout.SOUTH);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> JButton button = <span class="keyword">new</span> JButton();</div><div class="line">        button.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> a = <span class="number">1.0f</span>;<span class="comment">// 定义缩放因子</span></div><div class="line">                <span class="keyword">float</span> b = <span class="number">5.0f</span>;<span class="comment">// 定义偏移量</span></div><div class="line">                RescaleOp op = <span class="keyword">new</span> RescaleOp(a,b,<span class="keyword">null</span>);<span class="comment">// 创建具有指定缩放因子和偏移量的 RescaleOp对象</span></div><div class="line">                image = op.filter(image, <span class="keyword">null</span>);<span class="comment">// 对源图像中的数据进行逐像素重缩放，达到变亮的效果</span></div><div class="line">                repaint();<span class="comment">// 重新绘制图像</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        button.setText(<span class="string">"变    亮"</span>);</div><div class="line">        panel.add(button);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> JButton button_3 = <span class="keyword">new</span> JButton();</div><div class="line">        button_3.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> a = <span class="number">1.0f</span>;<span class="comment">// 定义缩放因子</span></div><div class="line">                <span class="keyword">float</span> b = -<span class="number">5.0f</span>;<span class="comment">// 定义偏移量</span></div><div class="line">                RescaleOp op = <span class="keyword">new</span> RescaleOp(a,b,<span class="keyword">null</span>);<span class="comment">// 创建具有指定缩放因子和偏移量的 RescaleOp对象</span></div><div class="line">                image = op.filter(image, <span class="keyword">null</span>);<span class="comment">// 对源图像中的数据进行逐像素重缩放，达到变暗的效果</span></div><div class="line">                repaint();<span class="comment">// 重新绘制图像</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        button_3.setText(<span class="string">"变    暗"</span>);</div><div class="line">        panel.add(button_3);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> JButton button_2 = <span class="keyword">new</span> JButton();</div><div class="line">        button_2.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                image = oldImage;  <span class="comment">// 获得变亮前的图像</span></div><div class="line">                imageBrightenPanel.repaint();<span class="comment">// 重新绘制原图像，即恢复为变亮前的图像</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        button_2.setText(<span class="string">"恢    复"</span>);</div><div class="line">        panel.add(button_2);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> JButton button_1 = <span class="keyword">new</span> JButton();</div><div class="line">        button_1.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                System.exit(<span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        button_1.setText(<span class="string">"退    出"</span>);</div><div class="line">        panel.add(button_1);</div><div class="line">  &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ImageBrightenPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (image != <span class="keyword">null</span>) &#123;</div><div class="line">                g.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);  <span class="comment">// 将缓冲图像对象绘制到面板上</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<p><strong>补充说明：这里的<code>RescaleOp</code>类可以调整色数，其原理是每一个样本值乘以一个缩放因子然后加上偏移量就是缩放的数，如果要变亮的话就将偏移量为正，反之为负，这里将缩放因子设置为1.0f是因为不想那么快速的变亮，如果你设置的大一点，就会很快变得很亮，反之亦然</strong></p>
</blockquote>
</blockquote>
<h2 id="转换彩色图片为灰色图片"><a href="#转换彩色图片为灰色图片" class="headerlink" title="转换彩色图片为灰色图片"></a>转换彩色图片为灰色图片</h2><blockquote>
<p>主要使用<code>ColorConvertOp</code>类，其构造函数如下<br><code>public ColorConvertOp(ColorSpace src,ColorSpace dst,RenderingHints hints)</code>:src是原颜色空间对象，dst是目标颜色空间对象，hints是用于控制颜色转换的RenderingHints对象，可以为null<br>使用<code>ColorConvertOp</code>类中的<code>filter</code>方法将彩色图像转换成灰色图像，定义如下：<br><code>public final BufferedImage filter(BufferedImage src,BufferedImage dst)</code>:scr要过滤的对象，dst目标空间对象</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zzk;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.awt.BorderLayout;</div><div class="line"><span class="keyword">import</span> java.awt.Graphics;</div><div class="line"><span class="keyword">import</span> java.awt.Image;</div><div class="line"><span class="keyword">import</span> java.awt.color.ColorSpace;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</div><div class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</div><div class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</div><div class="line"><span class="keyword">import</span> java.awt.image.ColorConvertOp;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</div><div class="line"><span class="keyword">import</span> javax.swing.JButton;</div><div class="line"><span class="keyword">import</span> javax.swing.JFrame;</div><div class="line"><span class="keyword">import</span> javax.swing.JPanel;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiColorToGrayFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> BufferedImage image;</div><div class="line">    <span class="keyword">private</span> ColorToGrayPanel colorToGrayPanel = <span class="keyword">new</span> ColorToGrayPanel();</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        MultiColorToGrayFrame frame = <span class="keyword">new</span> MultiColorToGrayFrame();</div><div class="line">        frame.setVisible(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MultiColorToGrayFrame</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        setBounds(<span class="number">100</span>, <span class="number">100</span>, <span class="number">357</span>, <span class="number">276</span>);</div><div class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</div><div class="line">        setTitle(<span class="string">"彩色图像转换为灰度"</span>);</div><div class="line">        Image img = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            img = ImageIO.read(<span class="keyword">new</span> File(<span class="string">"src/img/image.jpg"</span>));  <span class="comment">// 创建图像对象</span></div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        image = <span class="keyword">new</span> BufferedImage(img.getWidth(<span class="keyword">this</span>), img.getHeight(<span class="keyword">this</span>),</div><div class="line">                BufferedImage.TYPE_INT_RGB);<span class="comment">// 创建缓冲图像对象</span></div><div class="line">        image.getGraphics().drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);<span class="comment">// 在缓冲图像对象上绘制图像</span></div><div class="line">        </div><div class="line">        getContentPane().add(colorToGrayPanel, BorderLayout.CENTER);</div><div class="line">        </div><div class="line">        <span class="keyword">final</span> JPanel panel = <span class="keyword">new</span> JPanel();</div><div class="line">        getContentPane().add(panel, BorderLayout.SOUTH);</div><div class="line">        </div><div class="line">        <span class="keyword">final</span> JButton button = <span class="keyword">new</span> JButton();</div><div class="line">        button.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                ColorSpace colorSpace1 = ColorSpace.getInstance(ColorSpace.CS_GRAY);<span class="comment">// 创建内置线性为灰度的颜色空间</span></div><div class="line">                ColorSpace colorSpace2 = ColorSpace.getInstance(ColorSpace.CS_LINEAR_RGB);<span class="comment">// 创建内置线性为 RGB的颜色空间</span></div><div class="line">                ColorConvertOp op = <span class="keyword">new</span> ColorConvertOp(colorSpace1,colorSpace2,</div><div class="line">                        <span class="keyword">null</span>);<span class="comment">// 创建进行颜色转换的对象</span></div><div class="line">                image = op.filter(image, <span class="keyword">null</span>);<span class="comment">// 对缓冲图像进行颜色转换</span></div><div class="line">            repaint();<span class="comment">// 重新绘制图像</span></div><div class="line">        &#125;</div><div class="line">        &#125;);</div><div class="line">        button.setText(<span class="string">"转换为灰度"</span>);</div><div class="line">        panel.add(button);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> JButton button_1 = <span class="keyword">new</span> JButton();</div><div class="line">        button_1.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(<span class="keyword">final</span> ActionEvent e)</span> </span>&#123;</div><div class="line">                System.exit(<span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        button_1.setText(<span class="string">"退    出"</span>);</div><div class="line">        panel.add(button_1);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ColorToGrayPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (image != <span class="keyword">null</span>) &#123;</div><div class="line">                g.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);  <span class="comment">// 将缓冲图像对象绘制到面板上</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>补充说明：这里的<code>image.getGraphics().drawImage(img, 0, 0, null)</code>可以删除的，因为这里Graphics类中的drawImage可以直接绘制BufferedImage类型的缓冲图像，下面会给出一段代码做个示范</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</div><div class="line"><span class="keyword">import</span> javax.swing.*;</div><div class="line"><span class="keyword">import</span> java.awt.*;</div><div class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by Chenjiabing on 2017/4/5.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo</span>  <span class="keyword">extends</span> <span class="title">JFrame</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> BufferedImage image=<span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> Graphics2D graphics2D=<span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> draw my_draw=<span class="keyword">new</span> draw();</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line">    &#123;</div><div class="line">        demo my=<span class="keyword">new</span> demo();</div><div class="line">        my.setVisible(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">demo</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.setBounds(<span class="number">100</span>,<span class="number">100</span>,<span class="number">1000</span>,<span class="number">1000</span>);</div><div class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</div><div class="line">            <span class="keyword">try</span>&#123;</div><div class="line">                image= ImageIO.read(<span class="keyword">new</span> File(<span class="string">"src/img/image.jpg"</span>));</div><div class="line">                <span class="comment">//graphics2D=image.createGraphics();</span></div><div class="line">                <span class="comment">//graphics2D.drawImage(image,0,0,null);</span></div><div class="line">                <span class="comment">// image.getGraphics().drawImage(image,0,0,null);</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> (IOException e)</div><div class="line">        &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">            System.out.println(<span class="string">"error"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.getContentPane().add(my_draw);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">draw</span> <span class="keyword">extends</span> <span class="title">JPanel</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span></span></div><div class="line">        &#123;</div><div class="line">            g.drawImage(image,<span class="number">0</span>,<span class="number">0</span>,image.getWidth(),image.getHeight(),<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><blockquote>
<p><strong>从文件中读取图像的方法</strong></p>
<blockquote>
<ul>
<li>URL imgUrl = CutImageFrame.class.getResource(“/img/image.jpg”);//得到的是URL<br>  img = Toolkit.getDefaultToolkit().getImage(imgUrl);  //得到的是Image对象，同样的想要得到BufferedImage对象可以进行转     化</li>
<li><code>Image img=ImageIo(new File(&quot;path&quot;));</code>这里得到的是Image对象，如果想要得到BufferedImage对象，可以用BufferedImage的构造方法BufferedImage(int width,int height,)</li>
</ul>
<h2 id="作者说"><a href="#作者说" class="headerlink" title="作者说"></a>作者说</h2><blockquote>
<p>本人秉着方便他人的想法才开始写技术文章的，因为对于自学的人来说想要找到系统的学习教程很困难，这一点我深有体会，我也是在不断的摸索中才小有所成，如果你们觉得我写的不错就帮我推广一下，让更多的人看到。另外如果有什么错误的地方也要及时联系我，方便我改进，谢谢大家对我的支持</p>
</blockquote>
</blockquote>
</blockquote>
<p><em>版权信息所有者：chenjiabing</em><br><em>如若转载请标明出处：chenjiabing666.github.io6</em></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/java学习/">java学习</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/java图形与文本处理/">java图形与文本处理</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://chenjiabing666.github.io/2017/04/04/java图像处理干货篇/" data-title="java图像处理干货篇一 | 觅" data-tsina="5651317821" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/04/05/java布局管理器/" title="swing布局管理器">
  <strong>上一篇：</strong><br/>
  <span>
  swing布局管理器</span>
</a>
</div>


<div class="next">
<a href="/2017/04/01/matplotlib绘制图形基础/"  title="matplotlib绘制图形基础">
 <strong>下一篇：</strong><br/> 
 <span>matplotlib绘制图形基础
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#java图像处理干货篇"><span class="toc-number">1.</span> <span class="toc-text">java图像处理干货篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制图像"><span class="toc-number">1.1.</span> <span class="toc-text">绘制图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#翻转图像"><span class="toc-number">1.2.</span> <span class="toc-text">翻转图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#旋转图像"><span class="toc-number">1.3.</span> <span class="toc-text">旋转图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#倾斜图像"><span class="toc-number">1.4.</span> <span class="toc-text">倾斜图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#裁剪图片"><span class="toc-number">1.5.</span> <span class="toc-text">裁剪图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调整图片的亮度"><span class="toc-number">1.6.</span> <span class="toc-text">调整图片的亮度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#转换彩色图片为灰色图片"><span class="toc-number">1.7.</span> <span class="toc-text">转换彩色图片为灰色图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结："><span class="toc-number">1.8.</span> <span class="toc-text">总结：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作者说"><span class="toc-number">1.9.</span> <span class="toc-text">作者说</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/BootStrap学习/" title="BootStrap学习">BootStrap学习<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/JQuery学习/" title="JQuery学习">JQuery学习<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Scrapy学习/" title="Scrapy学习">Scrapy学习<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/java学习/" title="java学习">java学习<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/python数据挖掘与分析/" title="python数据挖掘与分析">python数据挖掘与分析<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库干货篇/" title="数据库干货篇">数据库干货篇<sup>6</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/scrapy/" title="scrapy">scrapy<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/swing/" title="swing">swing<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/java图形与文本处理/" title="java图形与文本处理">java图形与文本处理<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/SQL/" title="SQL">SQL<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/JQuery/" title="JQuery">JQuery<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/JDBC/" title="JDBC">JDBC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/python爬虫/" title="python爬虫">python爬虫<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/java基础/" title="java基础">java基础<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/BootStrap/" title="BootStrap">BootStrap<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/matplotlib/" title="matplotlib">matplotlib<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 人前显贵人后受罪 <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/5651317821" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/chenjiabing666" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/155022807" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="Chenjiabing">Chenjiabing</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    $('#toc.toc-aside').css('display', 'block').addClass('fadeIn');//新加的，打开文章时自动隐藏左边的栏
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'chenjiabing666';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'null', 'null');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261577779'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/z_stat.php%3Fid%3D1261577779' type='text/javascript'%3E%3C/script%3E"));</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

    <script type="text/javascript" src="/js/src/love.js"></script>

  </body>
  
  <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</html>
