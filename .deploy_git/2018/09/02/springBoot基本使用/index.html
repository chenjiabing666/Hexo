
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  
    <title>springBoot基本使用 | 爱撒谎的男孩</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="不才陈某">
    

    
    <meta name="description" content="获取配置文件中的值@ConfigurationProperties1、这个注解默认只能从全局配置文件中获取信息，全局配置有两个，如下：
​    1、application.properties
​    2、application.yml
yml1、key和value之间需要空格
2、缩进显示层次关系，缩进多少无所谓，只要左对齐那么就是一个层级关系的
3、key: value :： 表示一个键值">
<meta property="og:type" content="article">
<meta property="og:title" content="springBoot基本使用">
<meta property="og:url" content="http://chenjiabing666.github.io/2018/09/02/springBoot基本使用/index.html">
<meta property="og:site_name" content="爱撒谎的男孩">
<meta property="og:description" content="获取配置文件中的值@ConfigurationProperties1、这个注解默认只能从全局配置文件中获取信息，全局配置有两个，如下：
​    1、application.properties
​    2、application.yml
yml1、key和value之间需要空格
2、缩进显示层次关系，缩进多少无所谓，只要左对齐那么就是一个层级关系的
3、key: value :： 表示一个键值">
<meta property="og:image" content="https://www.slf4j.org/images/concrete-bindings.png">
<meta property="og:image" content="http://ono60m7tl.bkt.clouddn.com/jqueryWebjars.png">
<meta property="og:image" content="http://ono60m7tl.bkt.clouddn.com/classpath.png">
<meta property="og:image" content="https://gitee.com/chenjiabing666/Blog-file/raw/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20200310211704.jpg">
<meta property="og:updated_time" content="2020-03-13T06:11:13.318Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="springBoot基本使用">
<meta name="twitter:description" content="获取配置文件中的值@ConfigurationProperties1、这个注解默认只能从全局配置文件中获取信息，全局配置有两个，如下：
​    1、application.properties
​    2、application.yml
yml1、key和value之间需要空格
2、缩进显示层次关系，缩进多少无所谓，只要左对齐那么就是一个层级关系的
3、key: value :： 表示一个键值">
<meta name="twitter:image" content="https://www.slf4j.org/images/concrete-bindings.png">

    
    <link rel="alternative" href="/atom.xml" title="爱撒谎的男孩" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/avatar.jpg" alt="爱撒谎的男孩" title="爱撒谎的男孩"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="爱撒谎的男孩">爱撒谎的男孩</a></h1>
				<h2 class="blog-motto">微信公众号：码猿技术专栏</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives/">归档</a></li>
					
						<li><a href="/about/">关于我</a></li>
					
					<li>
 					
						<form class="search" action="https://chenjiabing666.github.io/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= 14509119671822170000 ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>	
			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/09/02/springBoot基本使用/" title="springBoot基本使用" itemprop="url">springBoot基本使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="不才陈某" target="_blank" itemprop="author">不才陈某</a>
		
  <p class="article-time">
    <time datetime="2018-09-02T11:24:08.000Z" itemprop="datePublished"> 发表于 2018-09-02</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#获取配置文件中的值-ConfigurationProperties"><span class="toc-number">1.</span> <span class="toc-text">获取配置文件中的值@ConfigurationProperties</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#yml"><span class="toc-number">1.1.</span> <span class="toc-text">yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties"><span class="toc-number">1.2.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Value"><span class="toc-number">1.3.</span> <span class="toc-text">@Value</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PropertySource"><span class="toc-number">2.</span> <span class="toc-text">@PropertySource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ImportSource"><span class="toc-number">3.</span> <span class="toc-text">@ImportSource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置类"><span class="toc-number">4.</span> <span class="toc-text">配置类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件占位符"><span class="toc-number">5.</span> <span class="toc-text">配置文件占位符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多环境开发"><span class="toc-number">6.</span> <span class="toc-text">多环境开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#properties-1"><span class="toc-number">6.1.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yaml"><span class="toc-number">6.2.</span> <span class="toc-text">yaml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件加载位置"><span class="toc-number">7.</span> <span class="toc-text">配置文件加载位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日志框架"><span class="toc-number">8.</span> <span class="toc-text">日志框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义日志文件"><span class="toc-number">8.1.</span> <span class="toc-text">自定义日志文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日志框架的切换"><span class="toc-number">8.2.</span> <span class="toc-text">日志框架的切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#程序中使用日志"><span class="toc-number">8.3.</span> <span class="toc-text">程序中使用日志</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC的开发"><span class="toc-number">9.</span> <span class="toc-text">SpringMVC的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个web模块"><span class="toc-number">9.1.</span> <span class="toc-text">创建一个web模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引入静态资源"><span class="toc-number">9.2.</span> <span class="toc-text">引入静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webjars的引入"><span class="toc-number">9.2.1.</span> <span class="toc-text">webjars的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他静态资源的引入"><span class="toc-number">9.2.2.</span> <span class="toc-text">其他静态资源的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置首页"><span class="toc-number">9.2.3.</span> <span class="toc-text">配置首页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置小图标"><span class="toc-number">9.2.4.</span> <span class="toc-text">配置小图标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义静态资源存放位置"><span class="toc-number">9.2.5.</span> <span class="toc-text">自定义静态资源存放位置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板引擎"><span class="toc-number">9.3.</span> <span class="toc-text">模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用thymelefa"><span class="toc-number">9.3.1.</span> <span class="toc-text">使用thymelefa</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#语法"><span class="toc-number">9.3.2.</span> <span class="toc-text">语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#springMVC的扩展"><span class="toc-number">9.4.</span> <span class="toc-text">springMVC的扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全面接管SpringMVC"><span class="toc-number">9.5.</span> <span class="toc-text">全面接管SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指定日期格式"><span class="toc-number">9.6.</span> <span class="toc-text">指定日期格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定制错误页面"><span class="toc-number">9.7.</span> <span class="toc-text">定制错误页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改Tomcat的默认配置"><span class="toc-number">9.8.</span> <span class="toc-text">修改Tomcat的默认配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册Servlet、Filter、Listener"><span class="toc-number">9.9.</span> <span class="toc-text">注册Servlet、Filter、Listener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整合数据源"><span class="toc-number">9.10.</span> <span class="toc-text">整合数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整合Druid数据源"><span class="toc-number">9.10.1.</span> <span class="toc-text">整合Druid数据源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整合Mybatis"><span class="toc-number">9.11.</span> <span class="toc-text">整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注解版"><span class="toc-number">9.11.1.</span> <span class="toc-text">注解版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置文件"><span class="toc-number">9.11.2.</span> <span class="toc-text">配置文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#springBoot对事务的支持"><span class="toc-number">9.12.</span> <span class="toc-text">springBoot对事务的支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自动热部署"><span class="toc-number">10.</span> <span class="toc-text">自动热部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot对跨域的支持"><span class="toc-number">11.</span> <span class="toc-text">SpringBoot对跨域的支持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#上传文件大小的配置"><span class="toc-number">12.</span> <span class="toc-text">上传文件大小的配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">13.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springBoot配置文件能够配置的全部配置"><span class="toc-number">14.</span> <span class="toc-text">springBoot配置文件能够配置的全部配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#笔者有话说"><span class="toc-number">15.</span> <span class="toc-text">笔者有话说</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#官方文档"><span class="toc-number">16.</span> <span class="toc-text">官方文档</span></a></li></ol>
		
		</div>
		
		<h2 id="获取配置文件中的值-ConfigurationProperties"><a href="#获取配置文件中的值-ConfigurationProperties" class="headerlink" title="获取配置文件中的值@ConfigurationProperties"></a>获取配置文件中的值@ConfigurationProperties</h2><p>1、这个注解默认只能从全局配置文件中获取信息，全局配置有两个，如下：</p>
<p>​    1、application.properties</p>
<p>​    2、application.yml</p>
<h3 id="yml"><a href="#yml" class="headerlink" title="yml"></a>yml</h3><p>1、key和value之间需要空格</p>
<p>2、缩进显示层次关系，缩进多少无所谓，只要左对齐那么就是一个层级关系的</p>
<p>3、<code>key: value</code> :： 表示一个键值对，注意一定要有空格</p>
<p>4、大小写敏感</p>
<p>5、属性的值如果是字符串可以直接写，不需要加上双引号或者单引号</p>
<p>​    1、双引号：加上双引号的值不会转义里面的特殊字符，比如字符串中包含一个换行符，那么就会在输出的时候换行</p>
<p>​    2、单引号：会转义特殊的字符，会直接输出换行符为<code>\n</code></p>
<p>6、List和Set的表示方法：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># key与value之间空格</span></div><div class="line"><span class="attr">pets:</span></div><div class="line">	<span class="bullet">-</span> <span class="string">dog</span></div><div class="line">	<span class="bullet">-</span> <span class="string">pig</span></div><div class="line">	<span class="bullet">-</span> <span class="string">cat</span></div><div class="line"></div><div class="line"><span class="comment">## 行内的写法：</span></div><div class="line"><span class="attr">pets:</span> <span class="string">[dog,pig,cat]</span></div></pre></td></tr></table></figure>
<p>7、Map<key,value>的写法</key,value></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">map:</span> <span class="string">&#123;name:</span> <span class="string">Jack,age:</span> <span class="number">22</span><span class="string">,gender:</span> <span class="string">女&#125;</span></div></pre></td></tr></table></figure>
<p>8、举例</p>
<p>1、JavaBean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * ConfigurationProperties ： 这个注解表示这个实体类的值来自于配置文件中，当然包括properties和yaml文件</div><div class="line"> *                          prefix表示这个配置文件中的前缀</div><div class="line"> */</div><div class="line"><span class="meta">@Component</span>  <span class="comment">//注入到容器中</span></div><div class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">    <span class="keyword">private</span> List&lt;Object&gt; list;</div><div class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; map;</div><div class="line">    <span class="keyword">private</span> User user;</div><div class="line">    <span class="keyword">private</span> Date birthday;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attr">person:</span></div><div class="line"><span class="attr">  name:</span> <span class="string">陈加兵</span></div><div class="line"><span class="attr">  age:</span> <span class="number">22</span></div><div class="line"><span class="attr">  list:</span></div><div class="line"><span class="bullet">    -</span> <span class="string">zhangsan</span></div><div class="line"><span class="bullet">    -</span> <span class="string">lisi</span></div><div class="line"><span class="attr">  user:</span></div><div class="line"><span class="attr">    name:</span> <span class="string">郑元梅</span></div><div class="line"><span class="attr">    age:</span> <span class="number">22</span></div><div class="line"><span class="attr">  map:</span> <span class="string">&#123;name:</span> <span class="string">Jack,age:</span> <span class="number">22</span><span class="string">,gender:</span> <span class="string">女&#125;</span></div><div class="line"><span class="attr">  birthday:</span> <span class="number">2012</span><span class="string">/12/11</span></div></pre></td></tr></table></figure>
<p>3、添加一个依赖，将会在配置文件中自动提示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--导入这个处理器，在配置文件中将会自动提示--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>4、测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</div><div class="line"><span class="meta">@SpringBootTest</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeammissionServerApplicationTests</span> </span>&#123;</div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> Person person;   <span class="comment">//自动注入</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(person);   <span class="comment">//输出配置信息</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><p>1、<strong>依然可以使用@ConfigurationProperties这个注解获取配置文件的值</strong>，不过和yml文件中的配置有很大的区别，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">person.age=22</div><div class="line">person.name=陈加兵</div><div class="line">person.birthday=2012/12/11</div><div class="line">person.list=a,b,c</div><div class="line">person.map.name=陈加兵</div><div class="line">person.map.age=22</div><div class="line">person.user.name=Jack</div><div class="line">person.user.age=33</div></pre></td></tr></table></figure>
<h3 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h3><p>1、这个注解是spring中的注解，用于获取配置文件的值</p>
<table>
<thead>
<tr>
<th>使用方式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Value(“${}”)</td>
<td>获取配置文件中的值</td>
</tr>
<tr>
<td>@Value(“#{}”)</td>
<td>获取配置文件中的值，不过需要使用<util:>这个指定id</util:></td>
</tr>
<tr>
<td>@Value(“value”)</td>
<td>可以直接为变量赋值</td>
</tr>
</tbody>
</table>
<p>2、不支持JSR303校验</p>
<h2 id="PropertySource"><a href="#PropertySource" class="headerlink" title="@PropertySource"></a>@PropertySource</h2><p>1、我们在使用<strong>@configurationProperties</strong>获取文件中的信息的时候，默认只能从默认的配置文件中获取信息，如果我们需要自己单独定义一个配置文件，那么需要使用@PropertySource这个注解获取其中的信息</p>
<p>2、 我们在项目路径下新建一个person.properties文件，其中的内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">person.age=22</div><div class="line">person.name=陈加兵</div><div class="line">person.birthday=2012/12/11</div><div class="line">person.list=a,b,c</div><div class="line">person.map.name=陈加兵</div><div class="line">person.map.age=22</div><div class="line">person.user.name=Jack</div><div class="line">person.user.age=33</div></pre></td></tr></table></figure>
<p>3、在Person这个实体类中添加如下的注解配置，使用@PropertySource这个注解加载这个配置文件，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * ConfigurationProperties ： 这个注解表示这个实体类的值来自于配置文件中，当然包括properties和yaml文件</div><div class="line"> *                          prefix表示这个配置文件中的前缀</div><div class="line"> */</div><div class="line"><span class="meta">@PropertySource</span>(value =&#123;<span class="string">"classpath:person.properties"</span>&#125;)   <span class="comment">//从自定义的配置文件中获取信息</span></div><div class="line"><span class="meta">@Component</span>  <span class="comment">//注入到容器中</span></div><div class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)   <span class="comment">//获取前缀为person的信息</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">    <span class="keyword">private</span> List&lt;Object&gt; list;</div><div class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; map;</div><div class="line">    <span class="keyword">private</span> User user;</div><div class="line">    <span class="keyword">private</span> Date birthday;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4、使用@PropertySource这个注解能够导入自定义的配置文件并且获取其中的值</p>
<p><strong>5、 使用这个注解只能加载properties文件，无法加载YAML文件</strong></p>
<h2 id="ImportSource"><a href="#ImportSource" class="headerlink" title="@ImportSource"></a>@ImportSource</h2><p>1、在springBoot中几乎没有配置文件，全部都是使用注解，那么我们如果需要使用配置文件，我们该如何让这个配置文件生效呢？</p>
<p>2、我们可以使用这个注解加载自己的配置文件xml，不过在springBoot中不赞成这样做，因为可以使用配置类来代替配置文件xml</p>
<p>3、我们在项目的resource文件下新建一个beans.xml，其中配置了如下的信息：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.telles.teammissionserver.bean.Person"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"22"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"陈加兵"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p>4、我们现在需要将其加入到IOC容器中，必须使用@ImportSource这个注解，我们需要在项目的主配置类上添加这个注解导入配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用这个注解可以导入自定义的配置文件xml,其中的value值是一个数组，可以填写多个值</span></div><div class="line"><span class="meta">@ImportResource</span>(value = &#123;<span class="string">"classpath:beans.xml"</span>&#125;)</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeammissionServerApplication</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        SpringApplication.run(TeammissionServerApplication.class, args);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h2><p>1、我们在springBoot中已经完全舍弃了配置文件的形式来为容器注入组件，我们都是使用配置类的形式，每个项目在建立的时候都有一个主配置类，使用<code>SpringBootApplication</code>这个注解来标注的，我们也可以定义自己的配置类，只要使用<strong>@Configuration</strong>这个注解标注即表示当前类是一个配置类。</p>
<p>2、我们在新建一个包config专门存放配置类，在其中可以建立多个配置类，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span>  <span class="comment">//指定这是一个配置类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainConfig</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@Bean</span>: 这个注解将其注入到IOC容器中</div><div class="line">     * 其中的返回类型Person就相当于class，方法名就是返回的id，在IOC容器中我们可以使用这个id获取自动</div><div class="line">     * 配置的实例</div><div class="line">     */</div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function">Person <span class="title">person</span><span class="params">()</span></span>&#123;</div><div class="line">        Person person=<span class="keyword">new</span> Person();</div><div class="line">        person.setAge(<span class="number">22</span>);</div><div class="line">        person.setName(<span class="string">"chen"</span>);</div><div class="line">        <span class="keyword">return</span> person;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="配置文件占位符"><a href="#配置文件占位符" class="headerlink" title="配置文件占位符"></a>配置文件占位符</h2><p>1、可以使用随机数，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">## 使用随机的uuid为其复制</div><div class="line">person.name=$&#123;random.uuid&#125;</div><div class="line">## 配置一个随机的int</div><div class="line">person.age=$&#123;random.int&#125;</div></pre></td></tr></table></figure>
<p>2、<strong>可以使用占位符获取之前配置的值，如果没有可以使用<code>:</code>指定默认值</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">## 配置一个随机的int</div><div class="line">person.age=$&#123;random.int&#125;</div><div class="line"># 使用占位符获取之前配置的值，如果这个值不存在，那么使用指定的默认值</div><div class="line">person.user.age=$&#123;person.age:33&#125;</div></pre></td></tr></table></figure>
<h2 id="多环境开发"><a href="#多环境开发" class="headerlink" title="多环境开发"></a>多环境开发</h2><p>1、我们在开发的时候可能会面对多环境，比如生产环境，测试环境，上线运行环境，针对这几种不同的环境，我们可能需要的配置也是不相同的，此时我们就需要在不同的环境之间切换不同的配置文件。</p>
<h3 id="properties-1"><a href="#properties-1" class="headerlink" title="properties"></a>properties</h3><p>1、我们可以在创建不同的properties文件，文件名如：<code>application-{profile}.properties</code>，比如，<code>application-dev.properties</code>和<code>application-prod.properties</code>这两个文件，此时我们可以springBoot的朱主配置文件中application.properties文件中添加如下的语句，用来激活某一种的配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 激活dev配置文件，那么此时springBoot就会以application-dev.properties文件为配置文件</div><div class="line">spring.profiles.active=dev</div></pre></td></tr></table></figure>
<h3 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h3><p>1、在yaml中不需要建立多个文件，因为yaml可以使用<code>---</code>区分不同的文档，只要在一个主配置文件application.yml中添加不同区域的文档，即使表示不同的文件，如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## 文档块1，此时激活dev</span></div><div class="line"><span class="attr">server:</span></div><div class="line"><span class="attr">  port:</span> <span class="number">8081</span></div><div class="line"><span class="attr">spring:</span></div><div class="line"><span class="attr">  profiles:</span></div><div class="line"><span class="attr">    active:</span> <span class="string">dev</span></div><div class="line"></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">## dev环境的配置</span></div><div class="line"><span class="attr">server:</span></div><div class="line"><span class="attr">  port:</span> <span class="number">8080</span></div><div class="line"><span class="attr">spring:</span></div><div class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></div><div class="line"></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="comment">## prod环境的配置</span></div><div class="line"><span class="attr">server:</span></div><div class="line"><span class="attr">  port:</span> <span class="number">8088</span></div><div class="line"><span class="attr">spring:</span></div><div class="line"><span class="attr">  profiles:</span> <span class="string">prod</span></div></pre></td></tr></table></figure>
<h2 id="配置文件加载位置"><a href="#配置文件加载位置" class="headerlink" title="配置文件加载位置"></a>配置文件加载位置</h2><p>1、springBoot项目创建的时候在classpath路径下的有一个<code>application.properties</code>文件，这个就是springBoot默认的文件位置，但是我们还可以在其他的位置指定配置文件，依然会生效。</p>
<p>2、springBoot有以下的位置可以放置配置文件，按照优先级由高到低如下：</p>
<p>​    1、项目路径下的config文件夹中</p>
<p>​    2、直接放在项目路径下</p>
<p>​    3、classpath路径下的config文件夹中</p>
<p>​    4、直接放在classpath路径下【创建项目的时候默认位置】</p>
<p><strong>3、classpth即是resource文件夹下</strong></p>
<p><strong>4、注意：无论放在哪个位置，默认加载的文件名称必须是application.properties</strong></p>
<p><strong>5、如果高优先级和低优先级共有的配置，那么高优先级会覆盖低优先级的配置，但是高优先级配置文件中的没有的配置，如果在低优先级的配置文件中存在，那么依然会生效，这样就可以形成互补的形式</strong></p>
<p>6、可以在默认的配置文件application.properties文件中使用<code>spring.config.location</code>来指定外部的配置文件，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.config.location=/usr/local/application.properties</div></pre></td></tr></table></figure>
<p><strong>7、在项目已经发布出去之后，我们也可以使用命令行的方式指定配置文件的位置，如：<code>java -jar springboot.jar --spring.config.location=/usr/local/application.properties</code></strong></p>
<h2 id="日志框架"><a href="#日志框架" class="headerlink" title="日志框架"></a>日志框架</h2><p>1、spring默认的规定的日志框架是self4j和logback，这是目前的主流的日志框架，如果想要使用self4j和log4j，那么需要使用指定的适配类进行接口的转换。转换关系如下图：</p>
<p><img src="https://www.slf4j.org/images/concrete-bindings.png" alt=""></p>
<p>2、默认什么都不配置的情况下，日志是开启的，使用的是self4j+logback，日志的级别是info</p>
<p>3、我们可以在全局配置文件appliction.properties或者application.yml中修改默认的配置，比如修改默认的日志级别，控制台输出格式，输出的日志文件的位置</p>
<p>4、日志的输出级别由高到低的级别如下：<code>ERROR</code>, <code>WARN</code>, <code>INFO</code>, <code>DEBUG</code>, or <code>TRACE</code>.</p>
<p>5、在springBoot中支持自定义的日志配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># 指定com.telles包下的所有类下的日志输出级别为debug,可以指定某个类或者某个包下的类所使用的日志级别</div><div class="line">logging.level.com.telles=error</div><div class="line"></div><div class="line"></div><div class="line"># 如果指定的相对路径，那么就是在当前项目下，如果指定的了绝对路径，比如c:\\log\\spring.log，那么就是在指定的位置上生成log输出的文件</div><div class="line">logging.file=log/spring.log</div><div class="line"></div><div class="line"># 也是指定的日志的文件的位置，不过是在当前项目的所在根目录下指定的文件的位置，比如/log/spring.log，这个就是在该项目的根目录中的log文件夹下指定的日志文件是spring.log</div><div class="line">logging.path=/log/spring.log</div><div class="line"></div><div class="line"># 指定控制台输出的格式，但是也是有默认的格式，这个和log4j的配置是一样的</div><div class="line">logging.pattern.console=</div><div class="line"></div><div class="line"># 指定日志文件的输出格式</div><div class="line">logging.pattern.file=</div><div class="line"></div><div class="line"># 指定文件最大大小</div><div class="line">logging.file.max-size=</div><div class="line"></div><div class="line"># 指定日期的格式</div><div class="line">logging.pattern.dateformat=</div><div class="line"></div><div class="line">## 文件最大保存历史量</div><div class="line">logging.file.max-history=</div></pre></td></tr></table></figure>
<p><strong>6、当然也可以使用自定义的配置文件，但是命名有一定的规范，否则springBoot并不能自动识别，比如如果使用logback日志框架的话，那么自定义的配置文件的名称必须是<code>logback-xxx.xml</code>,放在resource文件夹下,否则将不能识别，基本的配置如下：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">"false"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--定义日志文件的存储地址 一般存储在服务器的文件夹中--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"LOG_HOME"</span> <span class="attr">value</span>=<span class="string">"/tmp/logs"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 控制台输出 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"STDOUT"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--格式化输出--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%p]-[%c] - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 按照每天生成日志文件 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"FILE"</span>  <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--日志文件输出的文件名,使用日期进行拼接--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/web.log.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">FileNamePattern</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--日志文件最大的大小--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">MaxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">MaxFileSize</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- show parameters for hibernate sql 专为 Hibernate 定制</span></div><div class="line">    &lt;logger name="org.hibernate.type.descriptor.sql.BasicBinder"  level="TRACE" /&gt;</div><div class="line">    &lt;logger name="org.hibernate.type.descriptor.sql.BasicExtractor"  level="DEBUG" /&gt;</div><div class="line">    &lt;logger name="org.hibernate.SQL" level="DEBUG" /&gt;</div><div class="line">    &lt;logger name="org.hibernate.engine.QueryParameters" level="DEBUG" /&gt;</div><div class="line">    &lt;logger name="org.hibernate.engine.query.HQLQueryPlan" level="DEBUG" /&gt;--&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--myibatis log configure--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.apache.ibatis"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"java.sql.Connection"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"java.sql.Statement"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"java.sql.PreparedStatement"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 日志输出级别 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"STDOUT"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"FILE"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--日志异步到数据库 --&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;appender name="DB" class="ch.qos.logback.classic.db.DBAppender"&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&amp;lt;!&amp;ndash;日志异步到数据库 &amp;ndash;&amp;gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource"&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&amp;lt;!&amp;ndash;连接池 &amp;ndash;&amp;gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;url&gt;jdbc:mysql://127.0.0.1:3306/databaseName&lt;/url&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;user&gt;root&lt;/user&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;password&gt;root&lt;/password&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;/dataSource&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;/connectionSource&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;/appender&gt;--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="自定义日志文件"><a href="#自定义日志文件" class="headerlink" title="自定义日志文件"></a>自定义日志文件</h3><p>1、springboot启动的时候会自动加载日志的配置文件，默认使用的是self4j+logback，虽然springBoot为我们自动配置了默认的配置，但是我们还是需要自己定义配置文件，我们可以创建一个配置文件放置在resuorce文件夹下面，但是命名规则确实有一些区别，如下：</p>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code>, or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody>
</table>
<p>2、总结的说就是，如果使用logback的日志，那么可以指定一个<strong>logback.xml</strong>放置在resource文件夹下，那么springBoot将会默认加载这个配置，直接覆盖默认的配置。如果使用log4j这个日志框架，那么可以直接创建一个<strong>log4j.properties</strong>放置在resrouce文件夹下。如果使用log4j2这个日志，我们可以使用<strong>log4j2.xml</strong>这个日志文件放置在resoruce文件夹下。</p>
<h3 id="日志框架的切换"><a href="#日志框架的切换" class="headerlink" title="日志框架的切换"></a>日志框架的切换</h3><p>1、上面的日志文件都是一个配置文件针对多个环境，但是如果我们想要使用profile的功能，比如开发环境使用一个日志配置文件，运行环境使用另外一个配置文件，那么此时就需要使用日志框架的profile功能，此时的命名规则就必须是<code>logback-{profile}.xml</code>，比如使用logback框架的时候，那么我们可以配置<strong>logback-dev.xml</strong>作用与开发环境，使用<strong>logback-spring.xml</strong>用于运行环境。</p>
<p>2、虽然懂得了命名规则，那么需要在日志的配置文件中指定切换语句，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev | staging"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!production"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="程序中使用日志"><a href="#程序中使用日志" class="headerlink" title="程序中使用日志"></a>程序中使用日志</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> Logger logger= LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</div></pre></td></tr></table></figure>
<h2 id="SpringMVC的开发"><a href="#SpringMVC的开发" class="headerlink" title="SpringMVC的开发"></a>SpringMVC的开发</h2><p>1、如果想要开发springmvc模块，只需要选中web模块即可，默认的springBoot会自动为我们创建一些自动配置，不用自己一步一步的搭建springMVC框架。但是如果我们需要自己全面接管或者在原有的基础上进行一些扩展的话，SpringBoot都提供了一些支持。</p>
<h3 id="创建一个web模块"><a href="#创建一个web模块" class="headerlink" title="创建一个web模块"></a>创建一个web模块</h3><p>1、创建项目，导入启动器，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">		<span class="comment">&lt;!--导入web模块--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!--springBoot的测试模块--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!--导入这个处理器，在配置文件中将会自动提示--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!--热启动，保证每次修改，程序都会自动更新--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="引入静态资源"><a href="#引入静态资源" class="headerlink" title="引入静态资源"></a>引入静态资源</h3><h4 id="webjars的引入"><a href="#webjars的引入" class="headerlink" title="webjars的引入"></a>webjars的引入</h4><p>1、springMVC引入自动配置资源都是在<strong>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</strong>这个类中进行配置，因此静态资源位置的映射也是在这个类中完成的，如下，即是配置静态资源映射的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</div><div class="line">			logger.debug(<span class="string">"Default resource handling disabled"</span>);</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">		Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</div><div class="line">		CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache()</div><div class="line">				.getCachecontrol().toHttpCacheControl();</div><div class="line">           <span class="comment">//请求/webjars/**</span></div><div class="line">		<span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</div><div class="line">			customizeResourceHandlerRegistration(registry</div><div class="line">					.addResourceHandler(<span class="string">"/webjars/**"</span>)</div><div class="line">					.addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>)</div><div class="line">					.setCachePeriod(getSeconds(cachePeriod))</div><div class="line">					.setCacheControl(cacheControl));</div><div class="line">		&#125;</div><div class="line">           <span class="comment">//添加 /**资源映射</span></div><div class="line">		String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</div><div class="line">		<span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</div><div class="line">			customizeResourceHandlerRegistration(</div><div class="line">					registry.addResourceHandler(staticPathPattern)</div><div class="line">							.addResourceLocations(getResourceLocations(</div><div class="line">									<span class="keyword">this</span>.resourceProperties.getStaticLocations()))</div><div class="line">							.setCachePeriod(getSeconds(cachePeriod))</div><div class="line">							.setCacheControl(cacheControl));</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>2、通过上面的代码可以知道任何<code>/webjars/**</code>这种请求的方式都会在<code>classpath:/META-INF/resources/webjars/</code>这个位置查找相关的静态资源</p>
<p>3、webjars：是一种以jar包的方式引入静态资源，比如引用jQuery、Bootstrap的文件，那么我们只需要引入对应的jar包即可访问这些静态资源，官方网址：<a href="https://www.webjars.org/" target="_blank" rel="external">https://www.webjars.org/</a></p>
<p>4、比如我们现在引入jquery的jar，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--引入jquery的jar--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1-1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>5、此时我们看到导入webjas的目录结构，如下，自动配置的资源映射就是对应webjars下的资源位置，</p>
<p><img src="http://ono60m7tl.bkt.clouddn.com/jqueryWebjars.png" alt=""></p>
<p>​    1)、此时如果想要获取jquery.js这个文件，那么可以通过<code>http://localhost:8080/webjars/jquery/3.3.1-1/jquery.js</code>这个url查询到指定的文件，这个就是相对于上面springBoot自动配置的webjars的映射位置</p>
<h4 id="其他静态资源的引入"><a href="#其他静态资源的引入" class="headerlink" title="其他静态资源的引入"></a>其他静态资源的引入</h4><p>1、除了映入webjars这个静态资源，我们还有自定义的css和js文件，那么我们也必须有一个位置放置这些资源，让springBoot能够访问到</p>
<p>2、<code>/**</code>是用来访问当前项目的任何资源，主要的就是静态文件夹，默认映射的位置如下：</p>
<p>​    1）、classpath ： 指定的是java和resources文件夹</p>
<p>​    2）、这写文件夹都是存放静态资源的，那么肯定会发生冲突，比如多个文件夹存放的静态资源名称是一样的，那么我们该如何查找呢？</p>
<p>​    3）、这些文件夹是否顺序访问的，即是按照如下的优先级进行访问的，如果上一级找到了，那么将会返回，下面的文件夹将不会查找</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot;classpath:/META-INF/resources/&quot;, </div><div class="line">&quot;classpath:/resources/&quot;,</div><div class="line">&quot;classpath:/static/&quot;,</div><div class="line">&quot;classpath:/public/&quot;</div></pre></td></tr></table></figure>
<p>3、我们可以在classpath路径下创建上面的四个文件夹用来存放静态资源文件夹，这样我们就可以访问到这些资源了。如下：</p>
<p><img src="http://ono60m7tl.bkt.clouddn.com/classpath.png" alt=""></p>
<p>4、此时我将<code>slider.css</code>这个静态资源文件放置到static中，那么我们可以通过请求<code>http://localhost:8080/slider.css</code>，将可以访问到这个资源，主要就是去上面的四个文件夹下查找文件，如果有这个文件，那么就返回即可。</p>
<h4 id="配置首页"><a href="#配置首页" class="headerlink" title="配置首页"></a>配置首页</h4><p>1、在springBoot中，首页也为我们自动配置了存放的位置</p>
<p>2、我们只需把首页<code>index.html</code>放置在静态资源文件夹下即可访问，比如我们放一个index.html在static文件夹下，直接访问<code>http://localhost:8080/</code>这个即可自动跳转首页</p>
<h4 id="配置小图标"><a href="#配置小图标" class="headerlink" title="配置小图标"></a>配置小图标</h4><p>１、我们可以放置一个<code>favicon.ico</code>图片在静态资源文件夹下，那么即可自动为我们的页面配置上小图标</p>
<h4 id="自定义静态资源存放位置"><a href="#自定义静态资源存放位置" class="headerlink" title="自定义静态资源存放位置"></a>自定义静态资源存放位置</h4><p>1、我们在全局配置文件中指定自己配置的资源存放位置，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.resources.static-locations=classpath:/myStatic</div></pre></td></tr></table></figure>
<p>2、一旦配置这个路径，那么上面springBoot自动配置的路径将会失效</p>
<h3 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h3><p>1、sprintBoot不支持jsp，但是支持thymeleaf模板引擎，我们可以导入这个模板引擎</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--引入themleaf模板引擎--&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2、我们不需要指定版本号，在springBoot中已经为我们指定了默认的版本号，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.9.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">thymeleaf-extras-data-attribute.version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">thymeleaf-extras-data-attribute.version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">thymeleaf-extras-java8time.version</span>&gt;</span>3.0.1.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf-extras-java8time.version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">thymeleaf-extras-springsecurity4.version</span>&gt;</span>3.0.2.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf-extras-springsecurity4.version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="使用thymelefa"><a href="#使用thymelefa" class="headerlink" title="使用thymelefa"></a>使用thymelefa</h4><p>1、我们只需要将所有的html文件放在teamplate下，那么thymeleaf将会自动解析其中的文件</p>
<p>2、引入下面的约束将会自动提示语法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>1、<code>th</code>： 这个是使用th任意属性来替换原生属性，比如替换id使用<code>th:id</code>,class使用<code>th:class</code></p>
<p>2、<code>&lt;h1 th:text=&quot;${hello}&quot;&gt;成功访问&lt;/h1&gt;</code> ：替换标签体内的文本</p>
<p>3、表达式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Simple expressions:</div><div class="line">    Variable Expressions: $&#123;...&#125;</div><div class="line">    Selection Variable Expressions: *&#123;...&#125;</div><div class="line">    Message Expressions: #&#123;...&#125;</div><div class="line">    Link URL Expressions: @&#123;...&#125;</div><div class="line">    Fragment Expressions: ~&#123;...&#125;</div><div class="line">    Literals</div><div class="line">Text literals: &apos;one text&apos; , &apos;Another one!&apos; ,...</div><div class="line">Number literals: 0 , 34 , 3.0 , 12.3 ,...</div><div class="line">Boolean literals: true , false</div><div class="line">Null literal: null</div><div class="line">Literal tokens: one , sometext , main ,...</div><div class="line">Text operations:</div><div class="line">String concatenation: +</div><div class="line">Literal substitutions: |The name is $&#123;name&#125;|</div><div class="line">Arithmetic operations:</div><div class="line">Binary operators: + , - , * , / , %</div><div class="line">Minus sign (unary operator): -</div><div class="line">Boolean operations:</div><div class="line">Binary operators: and , or</div><div class="line">Boolean negation (unary operator): ! , not</div><div class="line">Comparisons and equality:</div><div class="line">Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</div><div class="line">Equality operators: == , != ( eq , ne )</div><div class="line">Conditional operators:</div><div class="line">If-then: (if) ? (then)</div><div class="line">If-then-else: (if) ? (then) : (else)</div><div class="line">Default: (value) ?: (defaultvalue)</div><div class="line">Special tokens:</div><div class="line">Page 17 of 106No-Operation: _</div></pre></td></tr></table></figure>
<h3 id="springMVC的扩展"><a href="#springMVC的扩展" class="headerlink" title="springMVC的扩展"></a>springMVC的扩展</h3><p>1、在springBoot中依赖mvc的自动配置肯定是不够的，比如我们需要添加一个拦截器，那么肯定是需要自己配置的，此时我们就需要定义自己的配置类进行扩展功能。</p>
<p>2、扩展的意思是几保留了mvc的自动配置，也使用了一些自定义的功能。</p>
<p>3、自动扩展的实现：</p>
<p>​    1）、定义一个配置类，使用<code>@Configuration</code></p>
<p>​    2）、继承<code>WebMvcConfigurationSupport</code>，这个类是一个抽象类，其中有实现springmvc的不同组件，如果需要那个组件，只需要实现其中的方法即可</p>
<p>​    3）、在这个类中实现其中的方法即可。</p>
<p>4、比如我们需要实现一个拦截器，那么我们需要创建一个拦截器类，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"使用拦截器"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5、我们需要在配置类中配置这个拦截器，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span>  <span class="comment">//springBoot的自动配置类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">//添加一个映射视图的组件，每次请求helloWorld都会映射到index.html</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</div><div class="line">            registry.addViewController(<span class="string">"/helloWorld"</span>).setViewName(<span class="string">"index"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//添加一个拦截器</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">       <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</div><div class="line">         registry.addInterceptor(<span class="keyword">new</span> 				MyInterceptor()).addPathPatterns(<span class="string">"/**"</span>).excludePathPatterns(<span class="string">"/helloWorld"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="全面接管SpringMVC"><a href="#全面接管SpringMVC" class="headerlink" title="全面接管SpringMVC"></a>全面接管SpringMVC</h3><p>1、全面接管的意思就是不需要springBoot的自动配置，而是全部使用自定义的配置</p>
<p>2、要实现全面接管springMVC，那么只需要在上面的配置上添加一个<code>@EnableWebMvc</code>，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span>  <span class="comment">//springBoot的自动配置类</span></div><div class="line"><span class="meta">@EnableWebMvc</span>   <span class="comment">//全面接管springMVC</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="指定日期格式"><a href="#指定日期格式" class="headerlink" title="指定日期格式"></a>指定日期格式</h3><p>1、springBoot默认的可以转换的日期格式：<code>yyyy/MM/dd</code>，那么我们可以在配置文件中改变这种配置格式，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">## 指定日期格式</div><div class="line">spring.mvc.date-format=yyyy-MM-dd</div></pre></td></tr></table></figure>
<p>2、一旦转换了这种日期的格式，那么当用户输入的日期格式为上面的那种才会自动转换成Date类型的数据，否则将会转换失败，出现异常</p>
<h3 id="定制错误页面"><a href="#定制错误页面" class="headerlink" title="定制错误页面"></a>定制错误页面</h3><h3 id="修改Tomcat的默认配置"><a href="#修改Tomcat的默认配置" class="headerlink" title="修改Tomcat的默认配置"></a>修改Tomcat的默认配置</h3><p>1、在springBoot默认使用的是嵌入式的tomcat容器，我们可以在全局配置文件中修改默认的tomcat的配置。</p>
<p>2、如何修改tomcat 的默认配置？</p>
<p>​    1）、在全局的配置文件application.properties中修改配置即可，如下：</p>
<p>​        1）、这些配置全部都是对应着<code>org.springframework.boot.autoconfigure.web.ServerProperties</code>这个类，Tomcat的配置对应着<code>org.springframework.boot.autoconfigure.web.ServerProperties.Tomcat</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">## 指定编码格式</div><div class="line">## 如果需要修改tomcat的默认配置，我们需要修改server.tomcat.xxx</div><div class="line">server.tomcat.uri-encoding=utf-8</div><div class="line"></div><div class="line">## 指定端口号</div><div class="line">## 如果需要修改server的默配置，我们需要修改server.xxxx</div><div class="line">server.port=8080</div></pre></td></tr></table></figure>
<h3 id="注册Servlet、Filter、Listener"><a href="#注册Servlet、Filter、Listener" class="headerlink" title="注册Servlet、Filter、Listener"></a>注册Servlet、Filter、Listener</h3><p>1、在springBoot中如果需要用到Servlet、过滤器和监听器，那么就需要自己配置</p>
<p>2、配置三大组件对应的类为：<code>ServletRegistrationBean</code>、<code>FilterRegistrationBean</code>、<code>ServletListenerRegistrationBean</code>。我们只需要在自定义的配置类中将三个组件注册到容器中即可</p>
<p>3、完成注册三大组件</p>
<p>​    1）、创建自己的三大组件</p>
<p>​    2）、创建一个配置类，在其中创建注入三大组件即可，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span>   <span class="comment">//指定这是一个配置类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebConfig</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//注册自己的Servlet,在其中可以设置在配置文件中能够设置的值</span></div><div class="line">    <span class="meta">@Bean</span>   <span class="comment">//将这个组件添加到容器中</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">registrationBean</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="comment">//构造方法，第一个参数指定的是自己的Servlet，第二个参数指定的是映射的路径，是一个可变参数，可以指定多个参数</span></div><div class="line">        ServletRegistrationBean bean=<span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> MyServlet(),<span class="string">"/hello"</span>,<span class="string">"/myFine"</span>);</div><div class="line">        bean.setLoadOnStartup(<span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> bean;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//注册过滤器</span></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">filterRegistrationBean</span><span class="params">()</span></span>&#123;</div><div class="line">        FilterRegistrationBean bean=<span class="keyword">new</span> FilterRegistrationBean();</div><div class="line">        bean.setFilter(<span class="keyword">new</span> MyFilter());  <span class="comment">//设置自己的Filter</span></div><div class="line">        bean.setUrlPatterns(Arrays.asList(<span class="string">"/**"</span>));  <span class="comment">//设置拦截的路径</span></div><div class="line">        <span class="keyword">return</span> bean;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//注册监听器</span></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean <span class="title">servletListenerRegistrationBean</span><span class="params">()</span></span>&#123;</div><div class="line">        ServletListenerRegistrationBean servletListenerRegistrationBean=<span class="keyword">new</span> ServletListenerRegistrationBean&lt;MyListener&gt;(<span class="keyword">new</span> MyListener());</div><div class="line">        <span class="keyword">return</span> servletListenerRegistrationBean;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="整合数据源"><a href="#整合数据源" class="headerlink" title="整合数据源"></a>整合数据源</h3><p>1、需要导入mysql的驱动程序</p>
<p>2、导入的依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--导入原生的jdbc启动器--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!--导入mysql的驱动--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>3、我们可以在springBoot的配置文件中设置默认的mysql参数，如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## 配置Jdbc</span></div><div class="line"><span class="attr">spring:</span></div><div class="line"><span class="attr">  datasource:</span></div><div class="line"><span class="attr">    username:</span> <span class="string">root</span></div><div class="line"><span class="attr">    password:</span> <span class="string">root</span></div><div class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://localhost:3306/jdbc</span></div><div class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></div><div class="line">    <span class="comment">## type用来指定使用什么数据连接池</span></div><div class="line">    <span class="comment">#type:</span></div></pre></td></tr></table></figure>
<p>4、springBoot中默认支持的连接池都在<code>org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration</code>中展示出来，如下：</p>
<p>​    1）、<code>org.apache.tomcat.jdbc.pool.DataSource</code></p>
<p>​    2）、<code>com.zaxxer.hikari.HikariDataSource</code></p>
<p>​    3）、<code>org.apache.commons.dbcp2.BasicDataSource</code></p>
<p><strong>5、当然我们也是可以自定义自己的数据源，我们只需要在配置文件中使用<code>spring-datasource.type</code>这个配置即可</strong></p>
<h4 id="整合Druid数据源"><a href="#整合Druid数据源" class="headerlink" title="整合Druid数据源"></a>整合Druid数据源</h4><p>0、<a href="https://www.cnblogs.com/niejunlei/p/5977895.html" target="_blank" rel="external">https://www.cnblogs.com/niejunlei/p/5977895.html</a></p>
<p>1、导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 添加数据库连接池 druid --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2、在全局配置文件中设置使用指定的数据源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 数据库访问配置</div><div class="line"># 主数据源，默认的</div><div class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</div><div class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</div><div class="line">spring.datasource.url=jdbc:mysql://localhost:3306/jdbc</div><div class="line">spring.datasource.username=root</div><div class="line">spring.datasource.password=root</div></pre></td></tr></table></figure>
<p>3、配置数据源参数，下面只是设置了部分的参数，在全局配置文件中设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># 下面为连接池的补充设置，应用到上面所有数据源中</div><div class="line"># 初始化大小，最小，最大</div><div class="line">spring.datasource.initialSize=5</div><div class="line">spring.datasource.minIdle=5</div><div class="line">spring.datasource.maxActive=20</div><div class="line"># 配置获取连接等待超时的时间</div><div class="line">spring.datasource.maxWait=60000</div><div class="line"># 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</div><div class="line">spring.datasource.timeBetweenEvictionRunsMillis=60000</div><div class="line"># 配置一个连接在池中最小生存的时间，单位是毫秒</div><div class="line">spring.datasource.minEvictableIdleTimeMillis=300000</div><div class="line">spring.datasource.validationQuery=SELECT 1 FROM DUAL</div><div class="line">spring.datasource.testWhileIdle=true</div><div class="line">spring.datasource.testOnBorrow=false</div><div class="line">spring.datasource.testOnReturn=false</div><div class="line"># 打开PSCache，并且指定每个连接上PSCache的大小</div><div class="line">spring.datasource.poolPreparedStatements=true</div><div class="line">spring.datasource.maxPoolPreparedStatementPerConnectionSize=20</div><div class="line"># 通过connectProperties属性来打开mergeSql功能；慢SQL记录</div><div class="line">spring.datasource.connectionProperties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000</div></pre></td></tr></table></figure>
<p>4、自定义一个DruidConfig，主要用来配置Druid，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span>   <span class="comment">//指定Druid的数据源的配置类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//配置druid的参数，并且将其注入到容器中</span></div><div class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> DruidDataSource <span class="title">druid</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 配置监控</div><div class="line">     *  1、配置一个管理后台的Servlet</div><div class="line">     *  2、配置一个监控的filter</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>&#123;</div><div class="line">        ServletRegistrationBean bean=<span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(),<span class="string">"/druid/*"</span>);</div><div class="line">        <span class="comment">//设置初始化参数</span></div><div class="line">        Map&lt;String,Object&gt; initParams=<span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        initParams.put(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);  <span class="comment">//设置登录的用户名</span></div><div class="line">        initParams.put(<span class="string">"loginPassword"</span>,<span class="string">"admin"</span>);  <span class="comment">//设置登录的密码</span></div><div class="line">        initParams.put(<span class="string">"resetEnable"</span>,<span class="string">"false"</span>);</div><div class="line"><span class="comment">//        initParams.put("allow","localhost");  //允许localhost访问，默认是所有都能访问</span></div><div class="line"><span class="comment">//        initParams.put("deny","IP地址");  //设置拒绝访问的ip</span></div><div class="line">        bean.setInitParameters(initParams);</div><div class="line">        <span class="keyword">return</span> bean;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//配置监控的Filter</span></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">filterRegistrationBean</span><span class="params">()</span></span>&#123;</div><div class="line">        FilterRegistrationBean bean=<span class="keyword">new</span> FilterRegistrationBean();</div><div class="line">        bean.setFilter(<span class="keyword">new</span> WebStatFilter());</div><div class="line">        Map&lt;String,Object&gt; initParams=<span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        initParams.put(<span class="string">"exclusions"</span>,<span class="string">"*.css,*.js,/druid/*"</span>);   <span class="comment">//设置不拦截器的路径</span></div><div class="line">        bean.setInitParameters(initParams);</div><div class="line">        bean.setUrlPatterns(Arrays.asList(<span class="string">"/**"</span>));</div><div class="line">        <span class="keyword">return</span> bean;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="整合Mybatis"><a href="#整合Mybatis" class="headerlink" title="整合Mybatis"></a>整合Mybatis</h3><p>1、添加mybatis的启动器，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--导入mybatis的依赖--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2、只需要引入这个启动器，那么springBoot就会自动导入如下的mybatis</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">mybatis-spring.version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">mybatis-spring.version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>1.5.6.RELEASE<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="注解版"><a href="#注解版" class="headerlink" title="注解版"></a>注解版</h4><p>1、我们可以使用注解版本的mybatis，只需要创建一个Mapper即可。如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Mapper</span>   <span class="comment">//表明这个是mapper接口，会自动扫描</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line">    <span class="meta">@Select</span>(<span class="string">"select * from t_user where user_id=#&#123;userId&#125;"</span>)</div><div class="line">    <span class="function">User <span class="title">selectUser</span><span class="params">(Integer userId)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">//插入，自增主键返回</span></div><div class="line">    <span class="meta">@Options</span>(useGeneratedKeys = <span class="keyword">true</span>,keyProperty = <span class="string">"userId"</span>)</div><div class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into t_user(name) values(#&#123;name&#125;)"</span>)</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、使用注解版，如果需要配置mybaits的一些参数，比如驼峰命名法等配置，那么我们可以自定义一个配置类，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.mybatis.spring.boot.autoconfigure.ConfigurationCustomizer;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Mybatis的配置类</div><div class="line"> */</div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisConfig</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//自定义一个定制器，在其中可以针对mybatis配置不同的参数，就相当于一个mybatis的主配置文件</span></div><div class="line">    <span class="meta">@Bean</span>  <span class="comment">//注入到容器中</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ConfigurationCustomizer <span class="title">configurationCustomizer</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(org.apache.ibatis.session.Configuration configuration)</span> </span>&#123;</div><div class="line">                configuration.setMapUnderscoreToCamelCase(<span class="keyword">true</span>);  <span class="comment">//开启驼峰命名法</span></div><div class="line">                <span class="comment">//在其中还可以配置myabtis的其他配置</span></div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3、除了自己配置自定义的配置类来指定mybatis的参数配置，我们还可以在全局配置文件中使用<code>mybatis</code>.来进行相关的配置，比如开启驼峰命名，如下：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mybatis.configuration.map-underscore-to-camel-case=true</div></pre></td></tr></table></figure>
<p>4、我们可以使用注解批量扫描mapper，这样我们就不需要在每一个Mapper接口都添加<code>@Mapper</code>这个注解，我们只需要在主配置类中添加<code>@MapperScan</code>这个注解即可，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//批量扫描com.tellwess.springbootserver.mappers这个包下面的所有mapper</span></div><div class="line"><span class="meta">@MapperScan</span>(value =<span class="string">"com.tellwess.springbootserver.mappers"</span>)</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootServerApplication</span> </span>&#123;</div></pre></td></tr></table></figure>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>1、我们将所有的mapper对应的配置文件放在<code>classpath:mapper/*.xml</code>下面的，其中的UserMapper.xml配置文件如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.tellwess.springbootserver.mappers.UserMapper"</span> &gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUser"</span> <span class="attr">resultType</span>=<span class="string">"com.tellwess.springbootserver.entities.User"</span>&gt;</span></div><div class="line">      select * from t_user where user_id=#&#123;userId&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span>&gt;</span></div><div class="line">        insert  into t_user(name) values(#&#123;name&#125;)</div><div class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2、创建一个UserMapper.java，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function">User <span class="title">selectUser</span><span class="params">(Integer userId)</span></span>;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3、在主配置类下创建添加批量扫描注解，将接口注入到容器中，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//批量扫描com.tellwess.springbootserver.mappers这个包下面的所有mapper</span></div><div class="line"><span class="meta">@MapperScan</span>(value =<span class="string">"com.tellwess.springbootserver.mappers"</span>)</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootServerApplication</span> </span>&#123;</div></pre></td></tr></table></figure>
<p>4、在全局配置文件中设置<code>*.xml</code>配置文件的位置，让springBoot能够扫描到，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">## 配置mybatis的全局配置文件</div><div class="line">mybatis.mapper-locations=classpath:mapper/*.xml</div><div class="line"># 开启驼峰命名</div><div class="line">mybatis.configuration.map-underscore-to-camel-case=true</div><div class="line"># 在其中还可以配置mybatis其他的配置</div></pre></td></tr></table></figure>
<h3 id="springBoot对事务的支持"><a href="#springBoot对事务的支持" class="headerlink" title="springBoot对事务的支持"></a>springBoot对事务的支持</h3><p>1、在spring中我们如果需要添加事务，可能需要配置切面或者声明式注解，但是在springBoot中我们只需要直接使用即可，一切都为我们自动配置了。</p>
<p>2、要想使用声明式事务注解，那么需要导入<code>spring.tx</code>这个jar，其实这个jar在我们导入<code>spring-boot-starter-jdbc</code>的时候就已经为我们导入了，但是如果我们要是使用mybatis的话，那么只需要导入mybatis的场景启动器即可，因为其中就已经包含了jdbc的场景启动器，因此我们只需要导入mybatis的场景启动器即可，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--导入mybatis的依赖--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>3、在需要添加事务的类上添加一个注解即可<code>@Transactional</code>，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Transactional</span></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="自动热部署"><a href="#自动热部署" class="headerlink" title="自动热部署"></a>自动热部署</h2><ul>
<li>每次修改代码后都需要重新启动程序，但是我们可以使用热部署功能，只需要导入依赖即可。修改代码完成后按住<code>Ctrl+F9</code>即可自动热部署</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--热部署--&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="SpringBoot对跨域的支持"><a href="#SpringBoot对跨域的支持" class="headerlink" title="SpringBoot对跨域的支持"></a>SpringBoot对跨域的支持</h2><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-cors" target="_blank" rel="external">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-cors</a></li>
<li>只需要在容器中注入<code>org.springframework.web.servlet.config.annotation.WebMvcConfigurer</code>这个实例即可，如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//添加跨域的功能</span></div><div class="line">    <span class="meta">@Bean</span></div><div class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">corsConfigurer</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</div><div class="line">                registry.addMapping(<span class="string">"/**"</span>)</div><div class="line"><span class="comment">//                        .allowedOrigins("http://192.168.1.97")</span></div><div class="line"><span class="comment">//                        .allowedMethods("GET", "POST")</span></div><div class="line"><span class="comment">//                        .allowCredentials(false).maxAge(3600);</span></div><div class="line">                ;   <span class="comment">//对所有的路径都支持跨域的访问</span></div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>以上是针对全局配置的跨域，如果需要对某一个controller中的请求使用跨域，可以使用<code>@CrossOrigin(origins = &quot;http://192.168.1.97:8080&quot;, maxAge = 3600)</code>这个注解标注在controller的类上，如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@CrossOrigin</span>(origins = <span class="string">"http://192.168.1.97:8080"</span>, maxAge = <span class="number">3600</span>)</div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span></span>&#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="上传文件大小的配置"><a href="#上传文件大小的配置" class="headerlink" title="上传文件大小的配置"></a>上传文件大小的配置</h2><ul>
<li>配置文件的方式：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#multipart upload 文件上传</div><div class="line">#限制一次上传的单个文件的大小</div><div class="line">spring.http.multipart.maxFileSize=10Mb</div><div class="line">#限制一次上传的所有文件的总大小</div><div class="line">spring.http.multipart.maxRequestSize=10Mb</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1、整合mybaits和数据源配置的所有依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--导入mysql的驱动--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!-- 添加数据库连接池 druid --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!--导入mybatis的依赖--&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="springBoot配置文件能够配置的全部配置"><a href="#springBoot配置文件能够配置的全部配置" class="headerlink" title="springBoot配置文件能够配置的全部配置"></a>springBoot配置文件能够配置的全部配置</h2><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#appendix" target="_blank" rel="external">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#appendix</a></li>
</ul>
<h2 id="笔者有话说"><a href="#笔者有话说" class="headerlink" title="笔者有话说"></a>笔者有话说</h2><ul>
<li>最近建了一个微信交流群，提供给大家一个交流的平台，扫描下方笔者的微信二维码，备注【交流】，我会把大家拉进群</li>
</ul>
<p><img src="https://gitee.com/chenjiabing666/Blog-file/raw/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20200310211704.jpg" alt=""></p>
<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p>1、<a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/" target="_blank" rel="external">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/SpringBoot/">SpringBoot</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://chenjiabing666.github.io/2018/09/02/springBoot基本使用/" data-title="springBoot基本使用 | 爱撒谎的男孩" data-tsina="5651317821" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2018/09/02/springBoot高级/" title="springBoot高级">
  <strong>上一篇：</strong><br/>
  <span>
  springBoot高级</span>
</a>
</div>


<div class="next">
<a href="/2018/08/04/StringUtils的源码解析/"  title="StringUtils的源码解析">
 <strong>下一篇：</strong><br/> 
 <span>StringUtils的源码解析
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#获取配置文件中的值-ConfigurationProperties"><span class="toc-number">1.</span> <span class="toc-text">获取配置文件中的值@ConfigurationProperties</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#yml"><span class="toc-number">1.1.</span> <span class="toc-text">yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties"><span class="toc-number">1.2.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Value"><span class="toc-number">1.3.</span> <span class="toc-text">@Value</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PropertySource"><span class="toc-number">2.</span> <span class="toc-text">@PropertySource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ImportSource"><span class="toc-number">3.</span> <span class="toc-text">@ImportSource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置类"><span class="toc-number">4.</span> <span class="toc-text">配置类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件占位符"><span class="toc-number">5.</span> <span class="toc-text">配置文件占位符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多环境开发"><span class="toc-number">6.</span> <span class="toc-text">多环境开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#properties-1"><span class="toc-number">6.1.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yaml"><span class="toc-number">6.2.</span> <span class="toc-text">yaml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件加载位置"><span class="toc-number">7.</span> <span class="toc-text">配置文件加载位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日志框架"><span class="toc-number">8.</span> <span class="toc-text">日志框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义日志文件"><span class="toc-number">8.1.</span> <span class="toc-text">自定义日志文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日志框架的切换"><span class="toc-number">8.2.</span> <span class="toc-text">日志框架的切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#程序中使用日志"><span class="toc-number">8.3.</span> <span class="toc-text">程序中使用日志</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC的开发"><span class="toc-number">9.</span> <span class="toc-text">SpringMVC的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个web模块"><span class="toc-number">9.1.</span> <span class="toc-text">创建一个web模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引入静态资源"><span class="toc-number">9.2.</span> <span class="toc-text">引入静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webjars的引入"><span class="toc-number">9.2.1.</span> <span class="toc-text">webjars的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他静态资源的引入"><span class="toc-number">9.2.2.</span> <span class="toc-text">其他静态资源的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置首页"><span class="toc-number">9.2.3.</span> <span class="toc-text">配置首页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置小图标"><span class="toc-number">9.2.4.</span> <span class="toc-text">配置小图标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义静态资源存放位置"><span class="toc-number">9.2.5.</span> <span class="toc-text">自定义静态资源存放位置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模板引擎"><span class="toc-number">9.3.</span> <span class="toc-text">模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用thymelefa"><span class="toc-number">9.3.1.</span> <span class="toc-text">使用thymelefa</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#语法"><span class="toc-number">9.3.2.</span> <span class="toc-text">语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#springMVC的扩展"><span class="toc-number">9.4.</span> <span class="toc-text">springMVC的扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全面接管SpringMVC"><span class="toc-number">9.5.</span> <span class="toc-text">全面接管SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指定日期格式"><span class="toc-number">9.6.</span> <span class="toc-text">指定日期格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定制错误页面"><span class="toc-number">9.7.</span> <span class="toc-text">定制错误页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改Tomcat的默认配置"><span class="toc-number">9.8.</span> <span class="toc-text">修改Tomcat的默认配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册Servlet、Filter、Listener"><span class="toc-number">9.9.</span> <span class="toc-text">注册Servlet、Filter、Listener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整合数据源"><span class="toc-number">9.10.</span> <span class="toc-text">整合数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整合Druid数据源"><span class="toc-number">9.10.1.</span> <span class="toc-text">整合Druid数据源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整合Mybatis"><span class="toc-number">9.11.</span> <span class="toc-text">整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注解版"><span class="toc-number">9.11.1.</span> <span class="toc-text">注解版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置文件"><span class="toc-number">9.11.2.</span> <span class="toc-text">配置文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#springBoot对事务的支持"><span class="toc-number">9.12.</span> <span class="toc-text">springBoot对事务的支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自动热部署"><span class="toc-number">10.</span> <span class="toc-text">自动热部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot对跨域的支持"><span class="toc-number">11.</span> <span class="toc-text">SpringBoot对跨域的支持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#上传文件大小的配置"><span class="toc-number">12.</span> <span class="toc-text">上传文件大小的配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">13.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springBoot配置文件能够配置的全部配置"><span class="toc-number">14.</span> <span class="toc-text">springBoot配置文件能够配置的全部配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#笔者有话说"><span class="toc-number">15.</span> <span class="toc-text">笔者有话说</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#官方文档"><span class="toc-number">16.</span> <span class="toc-text">官方文档</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Elasticsearch/" title="Elasticsearch">Elasticsearch<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hibernate/" title="Hibernate">Hibernate<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java-Web/" title="Java-Web">Java-Web<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/MyBatis/" title="MyBatis">MyBatis<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/Nginx/" title="Nginx">Nginx<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Redis/" title="Redis">Redis<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/Spring/" title="Spring">Spring<sup>39</sup></a></li>
		  
		
		  
			<li><a href="/categories/SpringBoot/" title="SpringBoot">SpringBoot<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/categories/Struts2/" title="Struts2">Struts2<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/java学习/" title="java学习">java学习<sup>35</sup></a></li>
		  
		
		  
			<li><a href="/categories/java并发编程/" title="java并发编程">java并发编程<sup>13</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>19</sup></a></li>
		  
		
		  
			<li><a href="/categories/web前端/" title="web前端">web前端<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/分布式/" title="分布式">分布式<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库干货篇/" title="数据库干货篇">数据库干货篇<sup>20</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据结构与算法/" title="数据结构与算法">数据结构与算法<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂谈/" title="杂谈">杂谈<sup>22</sup></a></li>
		  
		
		  
			<li><a href="/categories/设计模式/" title="设计模式">设计模式<sup>9</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Spring/" title="Spring">Spring<sup>39</sup></a></li>
			
		
			
				<li><a href="/tags/杂谈/" title="杂谈">杂谈<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/java基础/" title="java基础">java基础<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/python爬虫/" title="python爬虫">python爬虫<sup>18</sup></a></li>
			
		
			
				<li><a href="/tags/java并发编程/" title="java并发编程">java并发编程<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/SpringBoot/" title="SpringBoot">SpringBoot<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/SQL/" title="SQL">SQL<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/分布式/" title="分布式">分布式<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Struts2/" title="Struts2">Struts2<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/Hibernate/" title="Hibernate">Hibernate<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/数据结构与算法/" title="数据结构与算法">数据结构与算法<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/设计模式/" title="设计模式">设计模式<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/java-IO编程/" title="java IO编程">java IO编程<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Elasticsearch/" title="Elasticsearch">Elasticsearch<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/MyBatis/" title="MyBatis">MyBatis<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/web前端/" title="web前端">web前端<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>3</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://gitee.com/chenjiabing666/Blog-file/raw/master/%E4%B8%83%E7%A7%92%E7%BC%96%E7%A8%8B.jpg" target="_blank" title="微信公众号">微信公众号</a>
            
          </li>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.zhihu.com/people/xiao-ming-64-34-45/activities" target="_blank" title="本人知乎">本人知乎</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.cnblogs.com/Chenjiabing/" target="_blank" title="本人博客园">本人博客园</a>
            
          </li>
        
          <li>
            
            	<a href="https://blog.csdn.net/qq_34162294" target="_blank" title="本人CSDN">本人CSDN</a>
            
          </li>
        
          <li>
            
            	<a href="https://juejin.im/user/2506542244708072" target="_blank" title="本人掘金">本人掘金</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 欢迎关注微信公众号：码猿技术专栏 <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	 <script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=14509119671822169205' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/5651317821" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/chenjiabing666" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/155022807" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/https://www.zhihu.com/people/xiao-ming-64-34-45" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/about" target="_blank" title="不才陈某">不才陈某</a>
		
		
		</p>
		
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    $('#toc.toc-aside').css('display', 'block').addClass('fadeIn');//新加的，打开文章时自动隐藏左边的栏
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'chenjiabing666';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'null', 'null');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261577779'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/z_stat.php%3Fid%3D1261577779' type='text/javascript'%3E%3C/script%3E"));</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

    <script type="text/javascript" src="/js/src/love.js"></script>

  </body>
  
  <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</html>
